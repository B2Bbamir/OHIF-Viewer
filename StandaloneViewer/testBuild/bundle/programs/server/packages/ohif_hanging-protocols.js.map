{"version":3,"sources":["meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/namespace.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/collections.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/schema.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/hardcodedData.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/testData.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/classes/Protocol.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/classes/Rule.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/classes/Stage.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/classes/Viewport.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/classes/ViewportStructure.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/classes/rules/ImageMatchingRule.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/classes/rules/ProtocolMatchingRule.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/classes/rules/SeriesMatchingRule.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/classes/rules/StudyMatchingRule.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/lib/comparators.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/lib/removeFromArray.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/server/collections.js"],"names":["HP","HangingProtocols","Meteor","Collection","_debugName","allow","insert","update","remove","isDevelopment","isServer","startup","module","watch","require","attributeDefaults","abstractPriorValue","displaySettings","invert","id","text","defaultValue","options","studyAttributes","protocolAttributes","seriesAttributes","instanceAttributes","getDefaultProtocol","protocol","Protocol","locked","oneByOne","ViewportStructure","rows","columns","viewport","Viewport","first","Stage","viewports","push","stages","defaultProtocol","getMRTwoByTwoTest","proto","studyInstanceUid","ProtocolMatchingRule","equals","value","addProtocolMatchingRule","oneByTwo","left","right","firstSeries","SeriesMatchingRule","secondSeries","thirdImage","ImageMatchingRule","seriesMatchingRules","imageMatchingRules","twoByOne","left2","right2","fourthSeries","fifthSeries","second","testProtocol","getDemoProtocols","demoProtocols","v","Random","OHIF","removeFromArray","constructor","name","hasUpdatedPriorsInformation","createdDate","Date","modifiedDate","user","userLoggedIn","createdBy","getUserId","modifiedBy","availableTo","Set","editableBy","protocolMatchingRules","numberOfPriorsReferenced","getNumberOfPriorsReferenced","skipCache","forEach","stage","studyMatchingRules","rule","priorsReferenced","updateNumberOfPriorsReferenced","protocolWasModified","fromObject","input","ruleObject","stageObject","createClone","currentProtocol","Object","assign","clonedProtocol","addStage","removeProtocolMatchingRule","wasRemoved","export","Rule","comparators","EQUALS_REGEXP","attribute","constraint","required","weight","undefined","_constraintInfo","_validatorAndValue","getConstraintInfo","constraintInfo","ruleConstraint","keys","find","comparator","isRuleForPrior","ruleValidatorAndValue","getConstraintValidatorAndValue","validator","intValue","parseInt","test","validatorAndValue","currentValidator","constraintValidator","validatorOption","constraintValue","viewportStructure","currentStage","clonedStage","viewportObject","viewportSettings","StudyMatchingRule","removeRule","array","type","properties","getLayoutTemplateName","getNumViewports","description","freeze","_","length","index","isEqual","indexToRemove","splice","publish"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,KAAK,EAAL,C;;;;;;;;;;;ACAAC,mBAAmB,IAAIC,OAAOC,UAAX,CAAsB,kBAAtB,CAAnB;AACAF,iBAAiBG,UAAjB,GAA8B,kBAA9B;AAEAH,iBAAiBI,KAAjB,CAAuB;AACnBC,UAAQ,YAAW;AACf,WAAO,IAAP;AACH,GAHkB;AAInBC,UAAQ,YAAW;AACf,WAAO,IAAP;AACH,GANkB;AAOnBC,UAAQ,YAAW;AACf,WAAO,IAAP;AACH;AATkB,CAAvB,E,CAYA;;AACA,IAAIN,OAAOO,aAAP,IAAwBP,OAAOQ,QAAnC,EAA6C;AACzCR,SAAOS,OAAP,CAAe,MAAM;AACjBV,qBAAiBO,MAAjB,CAAwB,EAAxB;AACH,GAFD;AAGH,C;;;;;;;;;;;ACpBDI,OAAOC,KAAP,CAAaC,QAAQ,oBAAR,CAAb;AAA4CF,OAAOC,KAAP,CAAaC,QAAQ,iBAAR,CAAb;AAAyCF,OAAOC,KAAP,CAAaC,QAAQ,oBAAR,CAAb;AAA4CF,OAAOC,KAAP,CAAaC,QAAQ,6BAAR,CAAb;AAAqDF,OAAOC,KAAP,CAAaC,QAAQ,sCAAR,CAAb;AAA8DF,OAAOC,KAAP,CAAaC,QAAQ,mCAAR,CAAb;AAA2DF,OAAOC,KAAP,CAAaC,QAAQ,oCAAR,CAAb;AAA4DF,OAAOC,KAAP,CAAaC,QAAQ,mCAAR,CAAb,E;;;;;;;;;;;ACA3Wd,GAAGe,iBAAH,GAAuB;AACnBC,sBAAoB;AADD,CAAvB;AAIAhB,GAAGiB,eAAH,GAAqB;AACjBC,UAAQ;AACJC,QAAI,QADA;AAEJC,UAAM,yBAFF;AAGJC,kBAAc,IAHV;AAIJC,aAAS,CAAC,KAAD,EAAQ,IAAR;AAJL;AADS,CAArB,C,CASA;;AACAtB,GAAGuB,eAAH,GAAqB,CAAC;AAClBJ,MAAI,WADc;AAElBC,QAAM;AAFY,CAAD,EAGlB;AACCD,MAAI,WADL;AAECC,QAAM;AAFP,CAHkB,EAMlB;AACCD,MAAI,WADL;AAECC,QAAM;AAFP,CANkB,EASlB;AACCD,MAAI,WADL;AAECC,QAAM;AAFP,CATkB,EAYlB;AACCD,MAAI,WADL;AAECC,QAAM;AAFP,CAZkB,EAelB;AACCD,MAAI,oBADL;AAECC,QAAM;AAFP,CAfkB,CAArB;AAoBApB,GAAGwB,kBAAH,GAAwB,CAAC;AACrBL,MAAI,WADiB;AAErBC,QAAM;AAFe,CAAD,EAGrB;AACCD,MAAI,WADL;AAECC,QAAM;AAFP,CAHqB,EAMrB;AACCD,MAAI,WADL;AAECC,QAAM;AAFP,CANqB,EASrB;AACCD,MAAI,WADL;AAECC,QAAM;AAFP,CATqB,EAYrB;AACCD,MAAI,WADL;AAECC,QAAM;AAFP,CAZqB,EAerB;AACCD,MAAI,gBADL;AAECC,QAAM;AAFP,CAfqB,CAAxB;AAoBApB,GAAGyB,gBAAH,GAAsB,CAAC;AACnBN,MAAI,WADe;AAEnBC,QAAM;AAFa,CAAD,EAGnB;AACCD,MAAI,WADL;AAECC,QAAM;AAFP,CAHmB,EAMnB;AACCD,MAAI,WADL;AAECC,QAAM;AAFP,CANmB,EASnB;AACCD,MAAI,WADL;AAECC,QAAM;AAFP,CATmB,EAYnB;AACCD,MAAI,WADL;AAECC,QAAM;AAFP,CAZmB,CAAtB;AAiBApB,GAAG0B,kBAAH,GAAwB,CAAC;AACrBP,MAAI,WADiB;AAErBC,QAAM;AAFe,CAAD,EAGrB;AACCD,MAAI,WADL;AAECC,QAAM;AAFP,CAHqB,EAMrB;AACCD,MAAI,WADL;AAECC,QAAM;AAFP,CANqB,EASrB;AACCD,MAAI,WADL;AAECC,QAAM;AAFP,CATqB,EAYrB;AACCD,MAAI,WADL;AAECC,QAAM;AAFP,CAZqB,EAerB;AACCD,MAAI,WADL;AAECC,QAAM;AAFP,CAfqB,EAkBrB;AACCD,MAAI,WADL;AAECC,QAAM;AAFP,CAlBqB,EAqBrB;AACCD,MAAI,WADL;AAECC,QAAM;AAFP,CArBqB,EAwBrB;AACCD,MAAI,WADL;AAECC,QAAM;AAFP,CAxBqB,EA2BrB;AACCD,MAAI,WADL;AAECC,QAAM;AAFP,CA3BqB,CAAxB,C;;;;;;;;;;;ACvEA,SAASO,kBAAT,GAA8B;AAC1B,MAAIC,WAAW,IAAI5B,GAAG6B,QAAP,CAAgB,SAAhB,CAAf;AACAD,WAAST,EAAT,GAAc,iBAAd;AACAS,WAASE,MAAT,GAAkB,IAAlB;AAEA,MAAIC,WAAW,IAAI/B,GAAGgC,iBAAP,CAAyB,MAAzB,EAAiC;AAC5CC,UAAM,CADsC;AAE5CC,aAAS;AAFmC,GAAjC,CAAf;AAKA,MAAIC,WAAW,IAAInC,GAAGoC,QAAP,EAAf;AACA,MAAIC,QAAQ,IAAIrC,GAAGsC,KAAP,CAAaP,QAAb,EAAuB,UAAvB,CAAZ;AACAM,QAAME,SAAN,CAAgBC,IAAhB,CAAqBL,QAArB;AAEAP,WAASa,MAAT,CAAgBD,IAAhB,CAAqBH,KAArB;AAEArC,KAAG0C,eAAH,GAAqBd,QAArB;AACA,SAAO5B,GAAG0C,eAAV;AACH;;AAED,SAASC,iBAAT,GAA6B;AACzB,MAAIC,QAAQ,IAAI5C,GAAG6B,QAAP,CAAgB,aAAhB,CAAZ;AACAe,QAAMzB,EAAN,GAAW,aAAX;AACAyB,QAAMd,MAAN,GAAe,IAAf,CAHyB,CAIzB;;AAEA,MAAIe,mBAAmB,IAAI7C,GAAG8C,oBAAP,CAA4B,kBAA5B,EAAgD;AACnEC,YAAQ;AACJC,aAAO;AADH;AAD2D,GAAhD,EAIpB,IAJoB,CAAvB;AAMAJ,QAAMK,uBAAN,CAA8BJ,gBAA9B;AAEA,MAAIK,WAAW,IAAIlD,GAAGgC,iBAAP,CAAyB,MAAzB,EAAiC;AAC5CC,UAAM,CADsC;AAE5CC,aAAS;AAFmC,GAAjC,CAAf,CAdyB,CAmBzB;;AACA,MAAIiB,OAAO,IAAInD,GAAGoC,QAAP,EAAX;AACA,MAAIgB,QAAQ,IAAIpD,GAAGoC,QAAP,EAAZ;AAEA,MAAIiB,cAAc,IAAIrD,GAAGsD,kBAAP,CAA0B,cAA1B,EAA0C;AACxDP,YAAQ;AACJC,aAAO;AADH;AADgD,GAA1C,CAAlB;AAMA,MAAIO,eAAe,IAAIvD,GAAGsD,kBAAP,CAA0B,cAA1B,EAA0C;AACzDP,YAAQ;AACJC,aAAO;AADH;AADiD,GAA1C,CAAnB;AAMA,MAAIQ,aAAa,IAAIxD,GAAGyD,iBAAP,CAAyB,gBAAzB,EAA2C;AACxDV,YAAQ;AACJC,aAAO;AADH;AADgD,GAA3C,CAAjB;AAMAG,OAAKO,mBAAL,CAAyBlB,IAAzB,CAA8Ba,WAA9B;AACAF,OAAKQ,kBAAL,CAAwBnB,IAAxB,CAA6BgB,UAA7B;AAEAJ,QAAMM,mBAAN,CAA0BlB,IAA1B,CAA+Be,YAA/B;AACAH,QAAMO,kBAAN,CAAyBnB,IAAzB,CAA8BgB,UAA9B;AAEA,MAAInB,QAAQ,IAAIrC,GAAGsC,KAAP,CAAaY,QAAb,EAAuB,UAAvB,CAAZ;AACAb,QAAME,SAAN,CAAgBC,IAAhB,CAAqBW,IAArB;AACAd,QAAME,SAAN,CAAgBC,IAAhB,CAAqBY,KAArB;AAEAR,QAAMH,MAAN,CAAaD,IAAb,CAAkBH,KAAlB,EAnDyB,CAqDzB;;AACA,MAAIuB,WAAW,IAAI5D,GAAGgC,iBAAP,CAAyB,MAAzB,EAAiC;AAC5CC,UAAM,CADsC;AAE5CC,aAAS;AAFmC,GAAjC,CAAf;AAIA,MAAI2B,QAAQ,IAAI7D,GAAGoC,QAAP,EAAZ;AACA,MAAI0B,SAAS,IAAI9D,GAAGoC,QAAP,EAAb;AAEA,MAAI2B,eAAe,IAAI/D,GAAGsD,kBAAP,CAA0B,cAA1B,EAA0C;AACzDP,YAAQ;AACJC,aAAO;AADH;AADiD,GAA1C,CAAnB;AAMA,MAAIgB,cAAc,IAAIhE,GAAGsD,kBAAP,CAA0B,cAA1B,EAA0C;AACxDP,YAAQ;AACJC,aAAO;AADH;AADgD,GAA1C,CAAlB;AAMAa,QAAMH,mBAAN,CAA0BlB,IAA1B,CAA+BuB,YAA/B;AACAF,QAAMF,kBAAN,CAAyBnB,IAAzB,CAA8BgB,UAA9B;AACAM,SAAOJ,mBAAP,CAA2BlB,IAA3B,CAAgCwB,WAAhC;AACAF,SAAOH,kBAAP,CAA0BnB,IAA1B,CAA+BgB,UAA/B;AAEA,MAAIS,SAAS,IAAIjE,GAAGsC,KAAP,CAAasB,QAAb,EAAuB,UAAvB,CAAb;AACAK,SAAO1B,SAAP,CAAiBC,IAAjB,CAAsBqB,KAAtB;AACAI,SAAO1B,SAAP,CAAiBC,IAAjB,CAAsBsB,MAAtB;AAEAlB,QAAMH,MAAN,CAAaD,IAAb,CAAkByB,MAAlB;AAEAjE,KAAGkE,YAAH,GAAkBtB,KAAlB;AACA,SAAO5C,GAAGkE,YAAV;AACH;;AAED,SAASC,gBAAT,GAA4B;AAExBnE,KAAGoE,aAAH,GAAmB,EAAnB;AAEA;;;;AAGApE,KAAGoE,aAAH,CAAiB5B,IAAjB,CAAsB;AAClB,UAAM,eADY;AAElB,cAAU,KAFQ;AAGlB,YAAQ,uBAHU;AAIlB,mBAAe,0BAJG;AAKlB,oBAAgB,0BALE;AAMlB,mBAAe,EANG;AAOlB,kBAAc,EAPI;AAQlB,6BAAyB,CACrB;AACI,YAAM,mBADV;AAEI,gBAAU,CAFd;AAGI,kBAAY,KAHhB;AAII,mBAAa,WAJjB;AAKI,oBAAc;AACV,oBAAY;AACR,mBAAS;AADD;AADF;AALlB,KADqB,CARP;AAqBlB,cAAU,CACN;AACI,YAAM,mBADV;AAEI,cAAQ,UAFZ;AAGI,2BAAqB;AACjB,gBAAQ,MADS;AAEjB,sBAAc;AACV,kBAAQ,CADE;AAEV,qBAAW;AAFD,SAFG;AAMjB,8BAAsB;AANL,OAHzB;AAWI,mBAAa,CACT;AACI,4BAAoB,EADxB;AAEI,8BAAsB,EAF1B;AAGI,+BAAuB,CACnB;AACI,gBAAM,mBADV;AAEI,oBAAU,CAFd;AAGI,sBAAY,KAHhB;AAII,uBAAa,WAJjB;AAKI,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALlB,SADmB,CAH3B;AAgBI,8BAAsB;AAhB1B,OADS,EAmBT;AACI,4BAAoB,EADxB;AAEI,8BAAsB,EAF1B;AAGI,+BAAuB,CACnB;AACI,gBAAM,mBADV;AAEI,oBAAU,CAFd;AAGI,sBAAY,KAHhB;AAII,uBAAa,WAJjB;AAKI,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALlB,SADmB,CAH3B;AAgBI,8BAAsB,CAClB;AACI,gBAAM,mBADV;AAEI,oBAAU,CAFd;AAGI,sBAAY,KAHhB;AAII,uBAAa,oBAJjB;AAKI,wBAAc;AACV,sBAAU;AACN,uBAAS;AADH;AADA;AALlB,SADkB;AAhB1B,OAnBS,CAXjB;AA6DI,qBAAe;AA7DnB,KADM,EAgEN;AACI,YAAM,mBADV;AAEI,2BAAqB;AACjB,gBAAQ,MADS;AAEjB,sBAAc;AACV,kBAAQ,CADE;AAEV,qBAAW;AAFD,SAFG;AAMjB,8BAAsB;AANL,OAFzB;AAUI,mBAAa,CACT;AACI,4BAAoB,EADxB;AAEI,8BAAsB,EAF1B;AAGI,+BAAuB,CACnB;AACI,gBAAM,mBADV;AAEI,oBAAU,CAFd;AAGI,sBAAY,KAHhB;AAII,uBAAa,WAJjB;AAKI,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALlB,SADmB,CAH3B;AAgBI,8BAAsB;AAhB1B,OADS,EAmBT;AACI,4BAAoB,EADxB;AAEI,8BAAsB,EAF1B;AAGI,+BAAuB,CACnB;AACI,gBAAM,mBADV;AAEI,oBAAU,CAFd;AAGI,sBAAY,KAHhB;AAII,uBAAa,WAJjB;AAKI,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALlB,SADmB,CAH3B;AAgBI,8BAAsB,CAClB;AACI,gBAAM,mBADV;AAEI,oBAAU,CAFd;AAGI,sBAAY,KAHhB;AAII,uBAAa,oBAJjB;AAKI,wBAAc;AACV,sBAAU;AACN,uBAAS;AADH;AADA;AALlB,SADkB;AAhB1B,OAnBS,CAVjB;AA4DI,qBAAe;AA5DnB,KAhEM,EA8HN;AACI,YAAM,mBADV;AAEI,2BAAqB;AACjB,gBAAQ,MADS;AAEjB,sBAAc;AACV,kBAAQ,CADE;AAEV,qBAAW;AAFD,SAFG;AAMjB,8BAAsB;AANL,OAFzB;AAUI,mBAAa,CACT;AACI,4BAAoB,EADxB;AAEI,8BAAsB,EAF1B;AAGI,+BAAuB,CACnB;AACI,gBAAM,mBADV;AAEI,oBAAU,CAFd;AAGI,sBAAY,KAHhB;AAII,uBAAa,WAJjB;AAKI,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALlB,SADmB,CAH3B;AAgBI,8BAAsB;AAhB1B,OADS,EAmBT;AACI,4BAAoB;AAChB,sBAAY;AADI,SADxB;AAII,8BAAsB,EAJ1B;AAKI,+BAAuB,CACnB;AACI,gBAAM,mBADV;AAEI,oBAAU,CAFd;AAGI,sBAAY,KAHhB;AAII,uBAAa,WAJjB;AAKI,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALlB,SADmB,CAL3B;AAkBI,8BAAsB;AAlB1B,OAnBS,EAuCT;AACI,4BAAoB,EADxB;AAEI,8BAAsB,EAF1B;AAGI,+BAAuB,CACnB;AACI,gBAAM,mBADV;AAEI,oBAAU,CAFd;AAGI,sBAAY,KAHhB;AAII,uBAAa,WAJjB;AAKI,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALlB,SADmB,CAH3B;AAgBI,8BAAsB,CAClB;AACI,gBAAM,mBADV;AAEI,oBAAU,CAFd;AAGI,sBAAY,KAHhB;AAII,uBAAa,oBAJjB;AAKI,wBAAc;AACV,sBAAU;AACN,uBAAS;AADH;AADA;AALlB,SADkB;AAhB1B,OAvCS,EAqET;AACI,4BAAoB;AAChB,sBAAY;AADI,SADxB;AAII,8BAAsB,EAJ1B;AAKI,+BAAuB,CACnB;AACI,gBAAM,mBADV;AAEI,oBAAU,CAFd;AAGI,sBAAY,KAHhB;AAII,uBAAa,WAJjB;AAKI,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALlB,SADmB,CAL3B;AAkBI,8BAAsB,CAClB;AACI,gBAAM,mBADV;AAEI,oBAAU,CAFd;AAGI,sBAAY,KAHhB;AAII,uBAAa,oBAJjB;AAKI,wBAAc;AACV,sBAAU;AACN,uBAAS;AADH;AADA;AALlB,SADkB;AAlB1B,OArES,CAVjB;AAgHI,qBAAe;AAhHnB,KA9HM,CArBQ;AAsQlB,gCAA4B;AAtQV,GAAtB;AAyQA;;;;AAIAxC,KAAGoE,aAAH,CAAiB5B,IAAjB,CAAsB;AAClB,UAAM,eADY;AAElB,cAAU,KAFQ;AAGlB,YAAQ,yBAHU;AAIlB,mBAAe,0BAJG;AAKlB,oBAAgB,0BALE;AAMlB,mBAAe,EANG;AAOlB,kBAAc,EAPI;AAQlB,6BAAyB,CAAC;AACtB,YAAM,mBADgB;AAEtB,gBAAU,CAFY;AAGtB,kBAAY,KAHU;AAItB,mBAAa,WAJS;AAKtB,oBAAc;AACV,oBAAY;AACR,mBAAS;AADD;AADF;AALQ,KAAD,CARP;AAmBlB,cAAU,CAAC;AACP,YAAM,mBADC;AAEP,cAAQ,UAFD;AAGP,2BAAqB;AACjB,gBAAQ,MADS;AAEjB,sBAAc;AACV,kBAAQ,CADE;AAEV,qBAAW;AAFD,SAFG;AAMjB,8BAAsB;AANL,OAHd;AAWP,mBAAa,CAAC;AACV,4BAAoB,EADV;AAEV,8BAAsB,EAFZ;AAGV,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,CAHb;AAcV,8BAAsB;AAdZ,OAAD,EAeV;AACC,4BAAoB,EADrB;AAEC,8BAAsB,EAFvB;AAGC,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,CAHxB;AAcC,8BAAsB,CAAC;AACnB,gBAAM,mBADa;AAEnB,oBAAU,CAFS;AAGnB,sBAAY,KAHO;AAInB,uBAAa,oBAJM;AAKnB,wBAAc;AACV,sBAAU;AACN,uBAAS;AADH;AADA;AALK,SAAD;AAdvB,OAfU,CAXN;AAoDP,qBAAe;AApDR,KAAD,EAqDP;AACC,YAAM,mBADP;AAEC,2BAAqB;AACjB,gBAAQ,MADS;AAEjB,sBAAc;AACV,kBAAQ,CADE;AAEV,qBAAW;AAFD,SAFG;AAMjB,8BAAsB;AANL,OAFtB;AAUC,mBAAa,CAAC;AACV,4BAAoB,EADV;AAEV,8BAAsB,EAFZ;AAGV,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,EAUpB;AACC,gBAAM,mBADP;AAEC,oBAAU,CAFX;AAGC,sBAAY,KAHb;AAIC,uBAAa,WAJd;AAKC,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALf,SAVoB,CAHb;AAwBV,8BAAsB;AAxBZ,OAAD,EAyBV;AACC,4BAAoB,EADrB;AAEC,8BAAsB,EAFvB;AAGC,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,EAUpB;AACC,gBAAM,mBADP;AAEC,oBAAU,CAFX;AAGC,sBAAY,KAHb;AAIC,uBAAa,WAJd;AAKC,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALf,SAVoB,CAHxB;AAwBC,8BAAsB,CAAC;AACnB,gBAAM,mBADa;AAEnB,oBAAU,CAFS;AAGnB,sBAAY,KAHO;AAInB,uBAAa,oBAJM;AAKnB,wBAAc;AACV,sBAAU;AACN,uBAAS;AADH;AADA;AALK,SAAD;AAxBvB,OAzBU,CAVd;AAuEC,qBAAe;AAvEhB,KArDO,EA6HP;AACC,YAAM,mBADP;AAEC,2BAAqB;AACjB,gBAAQ,MADS;AAEjB,sBAAc;AACV,kBAAQ,CADE;AAEV,qBAAW;AAFD,SAFG;AAMjB,8BAAsB;AANL,OAFtB;AAUC,mBAAa,CAAC;AACV,4BAAoB,EADV;AAEV,8BAAsB,EAFZ;AAGV,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,EAUpB;AACC,gBAAM,mBADP;AAEC,oBAAU,CAFX;AAGC,sBAAY,KAHb;AAIC,uBAAa,WAJd;AAKC,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALf,SAVoB,CAHb;AAwBV,8BAAsB;AAxBZ,OAAD,EAyBV;AACC,4BAAoB;AAChB,sBAAY;AADI,SADrB;AAIC,8BAAsB,EAJvB;AAKC,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,EAUpB;AACC,gBAAM,mBADP;AAEC,oBAAU,CAFX;AAGC,sBAAY,KAHb;AAIC,uBAAa,WAJd;AAKC,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALf,SAVoB,CALxB;AA0BC,8BAAsB;AA1BvB,OAzBU,EAoDV;AACC,4BAAoB,EADrB;AAEC,8BAAsB,EAFvB;AAGC,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,EAUpB;AACC,gBAAM,mBADP;AAEC,oBAAU,CAFX;AAGC,sBAAY,KAHb;AAIC,uBAAa,WAJd;AAKC,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALf,SAVoB,CAHxB;AAwBC,8BAAsB,CAAC;AACnB,gBAAM,mBADa;AAEnB,oBAAU,CAFS;AAGnB,sBAAY,KAHO;AAInB,uBAAa,oBAJM;AAKnB,wBAAc;AACV,sBAAU;AACN,uBAAS;AADH;AADA;AALK,SAAD;AAxBvB,OApDU,EAuFV;AACC,4BAAoB;AAChB,sBAAY;AADI,SADrB;AAIC,8BAAsB,EAJvB;AAKC,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,EAUpB;AACC,gBAAM,mBADP;AAEC,oBAAU,CAFX;AAGC,sBAAY,KAHb;AAIC,uBAAa,WAJd;AAKC,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALf,SAVoB,CALxB;AA0BC,8BAAsB,CAAC;AACnB,gBAAM,mBADa;AAEnB,oBAAU,CAFS;AAGnB,sBAAY,KAHO;AAInB,uBAAa,oBAJM;AAKnB,wBAAc;AACV,sBAAU;AACN,uBAAS;AADH;AADA;AALK,SAAD;AA1BvB,OAvFU,CAVd;AAuIC,qBAAe;AAvIhB,KA7HO,CAnBQ;AAyRlB,gCAA4B;AAzRV,GAAtB;AA4RA;;;;AAIAxC,KAAGoE,aAAH,CAAiB5B,IAAjB,CAAsB;AAClB,UAAM,UADY;AAElB,cAAU,KAFQ;AAGlB,YAAQ,sBAHU;AAIlB,mBAAe,0BAJG;AAKlB,oBAAgB,0BALE;AAMlB,mBAAe,EANG;AAOlB,kBAAc,EAPI;AAQlB,6BAAyB,CAAC;AACtB,YAAM,mBADgB;AAEtB,gBAAU,CAFY;AAGtB,kBAAY,KAHU;AAItB,mBAAa,WAJS;AAKtB,oBAAc;AACV,oBAAY;AACR,mBAAS;AADD;AADF;AALQ,KAAD,CARP;AAmBlB,cAAU,CAAC;AACP,YAAM,mBADC;AAEP,cAAQ,UAFD;AAGP,2BAAqB;AACjB,gBAAQ,MADS;AAEjB,sBAAc;AACV,kBAAQ,CADE;AAEV,qBAAW;AAFD,SAFG;AAMjB,8BAAsB;AANL,OAHd;AAWP,mBAAa,CAAC;AACV,4BAAoB,EADV;AAEV,8BAAsB,EAFZ;AAGV,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,CAHb;AAcV,8BAAsB;AAdZ,OAAD,CAXN;AA2BP,qBAAe;AA3BR,KAAD,EA6BV;AACI,YAAM,mBADV;AAEI,cAAQ,UAFZ;AAGI,2BAAqB;AACjB,gBAAQ,MADS;AAEjB,sBAAc;AACV,kBAAQ,CADE;AAEV,qBAAW;AAFD,SAFG;AAMjB,8BAAsB;AANL,OAHzB;AAWI,mBAAa,CAAC;AACV,4BAAoB,EADV;AAEV,8BAAsB,EAFZ;AAGV,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,EAUpB;AACC,gBAAM,mBADP;AAEC,oBAAU,CAFX;AAGC,sBAAY,KAHb;AAIC,uBAAa,WAJd;AAKC,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALf,SAVoB,CAHb;AAwBV,8BAAsB;AAxBZ,OAAD,EAyBV;AACC,4BAAoB,EADrB;AAEC,8BAAsB,EAFvB;AAGC,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,EAUpB;AACC,gBAAM,mBADP;AAEC,oBAAU,CAFX;AAGC,sBAAY,KAHb;AAIC,uBAAa,WAJd;AAKC,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALf,SAVoB,CAHxB;AAwBC,8BAAsB;AAxBvB,OAzBU,EAkDV;AACC,4BAAoB,EADrB;AAEC,8BAAsB,EAFvB;AAGC,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,EAUpB;AACC,gBAAM,mBADP;AAEC,oBAAU,CAFX;AAGC,sBAAY,KAHb;AAIC,uBAAa,WAJd;AAKC,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALf,SAVoB,CAHxB;AAwBC,8BAAsB;AAxBvB,OAlDU,EA2EV;AACC,4BAAoB,EADrB;AAEC,8BAAsB,EAFvB;AAGC,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,EAUpB;AACC,gBAAM,mBADP;AAEC,oBAAU,CAFX;AAGC,sBAAY,KAHb;AAIC,uBAAa,WAJd;AAKC,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALf,SAVoB,CAHxB;AAwBC,8BAAsB;AAxBvB,OA3EU,CAXjB;AAgHI,qBAAe;AAhHnB,KA7BU,CAnBQ;AAkKlB,gCAA4B;AAlKV,GAAtB;AAqKA;;;;AAIAxC,KAAGoE,aAAH,CAAiB5B,IAAjB,CAAsB;AAClB,UAAM,aADY;AAElB,cAAU,KAFQ;AAGlB,YAAQ,cAHU;AAIlB,mBAAe,0BAJG;AAKlB,oBAAgB,0BALE;AAMlB,mBAAe,EANG;AAOlB,kBAAc,EAPI;AAQlB,6BAAyB,CAAC;AACtB,YAAM,mBADgB;AAEtB,gBAAU,CAFY;AAGtB,kBAAY,KAHU;AAItB,mBAAa,WAJS;AAKtB,oBAAc;AACV,oBAAY;AACR,mBAAS;AADD;AADF;AALQ,KAAD,CARP;AAmBlB,cAAU,CAAC;AACP,YAAM,mBADC;AAEP,cAAQ,UAFD;AAGP,2BAAqB;AACjB,gBAAQ,MADS;AAEjB,sBAAc;AACV,kBAAQ,CADE;AAEV,qBAAW;AAFD,SAFG;AAMjB,8BAAsB;AANL,OAHd;AAWP,mBAAa,CAAC;AACV,4BAAoB,EADV;AAEV,8BAAsB,EAFZ;AAGV,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,CAHb;AAcV,8BAAsB;AAdZ,OAAD,EAeV;AACC,4BAAoB,EADrB;AAEC,8BAAsB,EAFvB;AAGC,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,EAUpB;AACC,gBAAM,mBADP;AAEC,oBAAU,CAFX;AAGC,sBAAY,KAHb;AAIC,uBAAa,WAJd;AAKC,wBAAc;AACV,4BAAgB;AACZ,sCAAwB;AADZ;AADN;AALf,SAVoB,CAHxB;AAwBC,8BAAsB;AAxBvB,OAfU,CAXN;AAoDP,qBAAe;AApDR,KAAD,EAqDP;AACC,YAAM,mBADP;AAEC,cAAQ,UAFT;AAGC,2BAAqB;AACjB,gBAAQ,MADS;AAEjB,sBAAc;AACV,kBAAQ,CADE;AAEV,qBAAW;AAFD,SAFG;AAMjB,8BAAsB;AANL,OAHtB;AAWC,mBAAa,CAAC;AACV,4BAAoB,EADV;AAEV,8BAAsB,EAFZ;AAGV,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,CAHb;AAcV,8BAAsB;AAdZ,OAAD,EAeV;AACC,4BAAoB,EADrB;AAEC,8BAAsB,EAFvB;AAGC,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,CAHxB;AAcC,8BAAsB;AAdvB,OAfU,CAXd;AA0CC,qBAAe;AA1ChB,KArDO,EAgGP;AACC,YAAM,mBADP;AAEC,cAAQ,UAFT;AAGC,2BAAqB;AACjB,gBAAQ,MADS;AAEjB,sBAAc;AACV,kBAAQ,CADE;AAEV,qBAAW;AAFD,SAFG;AAMjB,8BAAsB;AANL,OAHtB;AAWC,mBAAa,CAAC;AACV,4BAAoB;AAChB,oBAAU;AADM,SADV;AAIV,8BAAsB,EAJZ;AAKV,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,CALb;AAgBV,8BAAsB;AAhBZ,OAAD,EAiBV;AACC,4BAAoB,EADrB;AAEC,8BAAsB,EAFvB;AAGC,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,CAHxB;AAcC,8BAAsB;AAdvB,OAjBU,CAXd;AA4CC,qBAAe;AA5ChB,KAhGO,CAnBQ;AAiKlB,gCAA4B;AAjKV,GAAtB;AAoKA;;;;AAIAxC,KAAGoE,aAAH,CAAiB5B,IAAjB,CAAsB;AAClB,UAAM,cADY;AAElB,cAAU,KAFQ;AAGlB,YAAQ,eAHU;AAIlB,mBAAe,0BAJG;AAKlB,oBAAgB,0BALE;AAMlB,mBAAe,EANG;AAOlB,kBAAc,EAPI;AAQlB,6BAAyB,CAAC;AACtB,YAAM,mBADgB;AAEtB,gBAAU,CAFY;AAGtB,kBAAY,KAHU;AAItB,mBAAa,WAJS;AAKtB,oBAAc;AACV,oBAAY;AACR,mBAAS;AADD;AADF;AALQ,KAAD,CARP;AAmBlB,cAAU,CAAC;AACP,YAAM,mBADC;AAEP,cAAQ,UAFD;AAGP,2BAAqB;AACjB,gBAAQ,MADS;AAEjB,sBAAc;AACV,kBAAQ,CADE;AAEV,qBAAW;AAFD,SAFG;AAMjB,8BAAsB;AANL,OAHd;AAWP,mBAAa,CAAC;AACV,4BAAoB,EADV;AAEV,8BAAsB,EAFZ;AAGV,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,CAHb;AAcV,8BAAsB;AAdZ,OAAD,EAeV;AACC,4BAAoB,EADrB;AAEC,8BAAsB,EAFvB;AAGC,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,CAHxB;AAcC,8BAAsB,CAAC;AACnB,gBAAM,mBADa;AAEnB,oBAAU,CAFS;AAGnB,sBAAY,KAHO;AAInB,uBAAa,oBAJM;AAKnB,wBAAc;AACV,sBAAU;AACN,uBAAS;AADH;AADA;AALK,SAAD;AAdvB,OAfU,CAXN;AAoDP,qBAAe;AApDR,KAAD,EAqDP;AACC,YAAM,mBADP;AAEC,cAAQ,UAFT;AAGC,2BAAqB;AACjB,gBAAQ,MADS;AAEjB,sBAAc;AACV,kBAAQ,CADE;AAEV,qBAAW;AAFD,SAFG;AAMjB,8BAAsB;AANL,OAHtB;AAWC,mBAAa,CAAC;AACV,4BAAoB,EADV;AAEV,8BAAsB,EAFZ;AAGV,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,EAUpB;AACC,gBAAM,mBADP;AAEC,oBAAU,CAFX;AAGC,sBAAY,KAHb;AAIC,uBAAa,WAJd;AAKC,wBAAc;AACV,4BAAgB;AACZ,sCAAwB;AADZ;AADN;AALf,SAVoB,CAHb;AAwBV,8BAAsB;AAxBZ,OAAD,EAyBV;AACC,4BAAoB,EADrB;AAEC,8BAAsB,EAFvB;AAGC,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,EAUpB;AACC,gBAAM,mBADP;AAEC,oBAAU,CAFX;AAGC,sBAAY,KAHb;AAIC,uBAAa,WAJd;AAKC,wBAAc;AACV,4BAAgB;AACZ,sCAAwB;AADZ;AADN;AALf,SAVoB,CAHxB;AAwBC,8BAAsB,CAAC;AACnB,gBAAM,mBADa;AAEnB,oBAAU,CAFS;AAGnB,sBAAY,KAHO;AAInB,uBAAa,oBAJM;AAKnB,wBAAc;AACV,sBAAU;AACN,uBAAS;AADH;AADA;AALK,SAAD;AAxBvB,OAzBU,CAXd;AAwEC,qBAAe;AAxEhB,KArDO,EA8HP;AACC,YAAM,mBADP;AAEC,cAAQ,UAFT;AAGC,2BAAqB;AACjB,gBAAQ,MADS;AAEjB,sBAAc;AACV,kBAAQ,CADE;AAEV,qBAAW;AAFD,SAFG;AAMjB,8BAAsB;AANL,OAHtB;AAWC,mBAAa,CAAC;AACV,4BAAoB,EADV;AAEV,8BAAsB,EAFZ;AAGV,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,CAHb;AAcV,8BAAsB;AAdZ,OAAD,EAeV;AACC,4BAAoB,EADrB;AAEC,8BAAsB,EAFvB;AAGC,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,CAHxB;AAcC,8BAAsB;AAdvB,OAfU,EA8BV;AACC,4BAAoB,EADrB;AAEC,8BAAsB,EAFvB;AAGC,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,CAHxB;AAcC,8BAAsB,CAAC;AACnB,gBAAM,mBADa;AAEnB,oBAAU,CAFS;AAGnB,sBAAY,KAHO;AAInB,uBAAa,oBAJM;AAKnB,wBAAc;AACV,sBAAU;AACN,uBAAS;AADH;AADA;AALK,SAAD;AAdvB,OA9BU,EAuDV;AACC,4BAAoB,EADrB;AAEC,8BAAsB,EAFvB;AAGC,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,CAHxB;AAcC,8BAAsB,CAAC;AACnB,gBAAM,mBADa;AAEnB,oBAAU,CAFS;AAGnB,sBAAY,KAHO;AAInB,uBAAa,oBAJM;AAKnB,wBAAc;AACV,sBAAU;AACN,uBAAS;AADH;AADA;AALK,SAAD;AAdvB,OAvDU,CAXd;AA4FC,qBAAe;AA5FhB,KA9HO,EA2NP;AACC,YAAM,mBADP;AAEC,cAAQ,UAFT;AAGC,2BAAqB;AACjB,gBAAQ,MADS;AAEjB,sBAAc;AACV,kBAAQ,CADE;AAEV,qBAAW;AAFD,SAFG;AAMjB,8BAAsB;AANL,OAHtB;AAWC,mBAAa,CAAC;AACV,4BAAoB;AAChB,oBAAU;AADM,SADV;AAIV,8BAAsB,EAJZ;AAKV,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,CALb;AAgBV,8BAAsB;AAhBZ,OAAD,EAiBV;AACC,4BAAoB,EADrB;AAEC,8BAAsB,EAFvB;AAGC,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,CAHxB;AAcC,8BAAsB;AAdvB,OAjBU,EAgCV;AACC,4BAAoB;AAChB,oBAAU;AADM,SADrB;AAIC,8BAAsB,EAJvB;AAKC,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,CALxB;AAgBC,8BAAsB,CAAC;AACnB,gBAAM,mBADa;AAEnB,oBAAU,CAFS;AAGnB,sBAAY,KAHO;AAInB,uBAAa,oBAJM;AAKnB,wBAAc;AACV,sBAAU;AACN,uBAAS;AADH;AADA;AALK,SAAD;AAhBvB,OAhCU,EA2DV;AACC,4BAAoB,EADrB;AAEC,8BAAsB,EAFvB;AAGC,+BAAuB,CAAC;AACpB,gBAAM,mBADc;AAEpB,oBAAU,CAFU;AAGpB,sBAAY,KAHQ;AAIpB,uBAAa,WAJO;AAKpB,wBAAc;AACV,wBAAY;AACR,uBAAS;AADD;AADF;AALM,SAAD,CAHxB;AAcC,8BAAsB,CAAC;AACnB,gBAAM,mBADa;AAEnB,oBAAU,CAFS;AAGnB,sBAAY,KAHO;AAInB,uBAAa,oBAJM;AAKnB,wBAAc;AACV,sBAAU;AACN,uBAAS;AADH;AADA;AALK,SAAD;AAdvB,OA3DU,CAXd;AAgGC,qBAAe;AAhGhB,KA3NO,CAnBQ;AAgVlB,gCAA4B;AAhVV,GAAtB;AAmVH;;AAEDb,qB,CACA;AACA,qB;;;;;;;;;;;ACx0CA,IAAIzB,MAAJ;AAAWU,OAAOC,KAAP,CAAaC,QAAQ,eAAR,CAAb,EAAsC;AAACZ,SAAOmE,CAAP,EAAS;AAACnE,aAAOmE,CAAP;AAAS;;AAApB,CAAtC,EAA4D,CAA5D;AAA+D,IAAIC,MAAJ;AAAW1D,OAAOC,KAAP,CAAaC,QAAQ,eAAR,CAAb,EAAsC;AAACwD,SAAOD,CAAP,EAAS;AAACC,aAAOD,CAAP;AAAS;;AAApB,CAAtC,EAA4D,CAA5D;AAA+D,IAAIE,IAAJ;AAAS3D,OAAOC,KAAP,CAAaC,QAAQ,kBAAR,CAAb,EAAyC;AAACyD,OAAKF,CAAL,EAAO;AAACE,WAAKF,CAAL;AAAO;;AAAhB,CAAzC,EAA2D,CAA3D;AAA8D,IAAIG,eAAJ;AAAoB5D,OAAOC,KAAP,CAAaC,QAAQ,wBAAR,CAAb,EAA+C;AAAC0D,kBAAgBH,CAAhB,EAAkB;AAACG,sBAAgBH,CAAhB;AAAkB;;AAAtC,CAA/C,EAAuF,CAAvF;;AAO/O;;;;;AAKArE,GAAG6B,QAAH,GAAc,MAAMA,QAAN,CAAe;AACzB;;;;;;AAMA4C,cAAYC,IAAZ,EAAkB;AACd;AACA,SAAKvD,EAAL,GAAUmD,OAAOnD,EAAP,EAAV,CAFc,CAId;AACA;AACA;AACA;;AACA,SAAKW,MAAL,GAAc,KAAd,CARc,CAUd;AACA;;AACA,SAAK6C,2BAAL,GAAmC,KAAnC,CAZc,CAcd;;AACA,SAAKD,IAAL,GAAYA,IAAZ,CAfc,CAiBd;;AACA,SAAKE,WAAL,GAAmB,IAAIC,IAAJ,EAAnB;AACA,SAAKC,YAAL,GAAoB,IAAID,IAAJ,EAApB,CAnBc,CAqBd;AACA;;AACA,QAAIN,KAAKQ,IAAL,IAAaR,KAAKQ,IAAL,CAAUC,YAAvB,IAAuCT,KAAKQ,IAAL,CAAUC,YAAV,EAA3C,EAAqE;AACjE,WAAKC,SAAL,GAAiBV,KAAKQ,IAAL,CAAUG,SAAV,EAAjB;AACA,WAAKC,UAAL,GAAkBZ,KAAKQ,IAAL,CAAUG,SAAV,EAAlB;AACH,KA1Ba,CA4Bd;AACA;;;AACA,SAAKE,WAAL,GAAmB,IAAIC,GAAJ,EAAnB;AACA,SAAKC,UAAL,GAAkB,IAAID,GAAJ,EAAlB,CA/Bc,CAiCd;AACA;;AACA,SAAKE,qBAAL,GAA6B,EAA7B;AACA,SAAK9C,MAAL,GAAc,EAAd,CApCc,CAsCd;;AACA,SAAK+C,wBAAL,GAAgC,CAAC,CAAjC;AACH;;AAEDC,8BAA4BC,YAAY,KAAxC,EAA+C;AAC3C,QAAIF,2BAA2BE,cAAc,IAAd,GAAqB,KAAKF,wBAA1B,GAAqD,CAAC,CAArF,CAD2C,CAG3C;;AACA,QAAIA,2BAA2B,CAAC,CAAhC,EAAmC;AAC/B,aAAOA,wBAAP;AACH;;AAEDA,+BAA2B,CAA3B,CAR2C,CAU3C;AACA;AACA;;AACA,SAAK/C,MAAL,CAAYkD,OAAZ,CAAoBC,SAAS;AACzB,UAAI,CAACA,MAAMrD,SAAX,EAAsB;AAClB;AACH;;AAEDqD,YAAMrD,SAAN,CAAgBoD,OAAhB,CAAwBxD,YAAY;AAChC,YAAI,CAACA,SAAS0D,kBAAd,EAAkC;AAC9B;AACH;;AAED1D,iBAAS0D,kBAAT,CAA4BF,OAA5B,CAAoCG,QAAQ;AACxC;AACA,gBAAMC,mBAAmBD,KAAKL,2BAAL,EAAzB;;AACA,cAAIM,mBAAmBP,wBAAvB,EAAiD;AAC7CA,uCAA2BO,gBAA3B;AACH;AACJ,SAND;AAOH,OAZD;AAaH,KAlBD;AAoBA,SAAKP,wBAAL,GAAgCA,wBAAhC;AAEA,WAAOA,wBAAP;AACH;;AAEDQ,mCAAiC;AAC7B,SAAKP,2BAAL,CAAiC,IAAjC;AACH;AAED;;;;;;AAIAQ,wBAAsB;AAClB;AACA;AACA,QAAI1B,KAAKQ,IAAL,IAAaR,KAAKQ,IAAL,CAAUC,YAAvB,IAAuCT,KAAKQ,IAAL,CAAUC,YAAV,EAA3C,EAAqE;AACjE,WAAKG,UAAL,GAAkBZ,KAAKQ,IAAL,CAAUG,SAAV,EAAlB;AACH,KALiB,CAOlB;AACA;;;AACA,SAAKP,2BAAL,GAAmC,KAAnC,CATkB,CAWlB;;AACA,SAAKqB,8BAAL,GAZkB,CAclB;;AACA,SAAKlB,YAAL,GAAoB,IAAID,IAAJ,EAApB;AACH;AAED;;;;;;;;;AAOAqB,aAAWC,KAAX,EAAkB;AACd;AACA;AACA,SAAKhF,EAAL,GAAUgF,MAAMhF,EAAN,IAAYmD,OAAOnD,EAAP,EAAtB,CAHc,CAKd;;AACA,SAAKuD,IAAL,GAAYyB,MAAMzB,IAAlB,CANc,CAQd;AACA;;AACA,SAAK5C,MAAL,GAAc,CAAC,CAACqE,MAAMrE,MAAtB,CAVc,CAYd;AACA;AACA;AAEA;;AACA,QAAIqE,MAAMZ,qBAAV,EAAiC;AAC7BY,YAAMZ,qBAAN,CAA4BI,OAA5B,CAAoCS,cAAc;AAC9C;AACA,YAAIN,OAAO,IAAI9F,GAAG8C,oBAAP,EAAX;AACAgD,aAAKI,UAAL,CAAgBE,UAAhB,EAH8C,CAK9C;;AACA,aAAKb,qBAAL,CAA2B/C,IAA3B,CAAgCsD,IAAhC;AACH,OAPD;AAQH,KA1Ba,CA4Bd;AACA;;;AACA,QAAIK,MAAM1D,MAAV,EAAkB;AACd0D,YAAM1D,MAAN,CAAakD,OAAb,CAAqBU,eAAe;AAChC;AACA,YAAIT,QAAQ,IAAI5F,GAAGsC,KAAP,EAAZ;AACAsD,cAAMM,UAAN,CAAiBG,WAAjB,EAHgC,CAKhC;;AACA,aAAK5D,MAAL,CAAYD,IAAZ,CAAiBoD,KAAjB;AACH,OAPD;AAQH;AACJ;AAED;;;;;;;;AAMAU,cAAY5B,IAAZ,EAAkB;AACd;AACA,QAAI6B,kBAAkBC,OAAOC,MAAP,CAAc,EAAd,EAAkB,IAAlB,CAAtB,CAFc,CAId;;AACA,QAAIC,iBAAiB,IAAI1G,GAAG6B,QAAP,EAArB,CALc,CAOd;;AACA0E,oBAAgBpF,EAAhB,GAAqBuF,eAAevF,EAApC;AACAuF,mBAAeR,UAAf,CAA0BK,eAA1B,EATc,CAWd;;AACA,QAAI7B,IAAJ,EAAU;AACNgC,qBAAehC,IAAf,GAAsBA,IAAtB;AACH,KAda,CAgBd;;;AACAgC,mBAAe5E,MAAf,GAAwB,KAAxB,CAjBc,CAmBd;;AACA,WAAO4E,cAAP;AACH;AAED;;;;;;;AAKAC,WAASf,KAAT,EAAgB;AACZ,SAAKnD,MAAL,CAAYD,IAAZ,CAAiBoD,KAAjB,EADY,CAGZ;AACA;;AACA,SAAKK,mBAAL;AACH;AAED;;;;;;;AAKAhD,0BAAwB6C,IAAxB,EAA8B;AAC1B,SAAKP,qBAAL,CAA2B/C,IAA3B,CAAgCsD,IAAhC,EAD0B,CAG1B;AACA;;AACA,SAAKG,mBAAL;AACH;AAED;;;;;;;AAKAW,6BAA2Bd,IAA3B,EAAiC;AAC7B,QAAIe,aAAarC,gBAAgB,KAAKe,qBAArB,EAA4CO,IAA5C,CAAjB,CAD6B,CAG7B;AACA;;AACA,QAAIe,UAAJ,EAAgB;AACZ,WAAKZ,mBAAL;AACH;AACJ;;AAtOwB,CAA7B,C;;;;;;;;;;;ACZArF,OAAOkG,MAAP,CAAc;AAACC,QAAK,MAAIA;AAAV,CAAd;AAA+B,IAAIzC,MAAJ;AAAW1D,OAAOC,KAAP,CAAaC,QAAQ,eAAR,CAAb,EAAsC;AAACwD,SAAOD,CAAP,EAAS;AAACC,aAAOD,CAAP;AAAS;;AAApB,CAAtC,EAA4D,CAA5D;AAA+D,IAAI2C,WAAJ;AAAgBpG,OAAOC,KAAP,CAAaC,QAAQ,oBAAR,CAAb,EAA2C;AAACkG,cAAY3C,CAAZ,EAAc;AAAC2C,kBAAY3C,CAAZ;AAAc;;AAA9B,CAA3C,EAA2E,CAA3E;AAIzH,MAAM4C,gBAAgB,UAAtB;AAEA;;;;;;;;;;;;;;;;;;AAiBO,MAAMF,IAAN,CAAW;AACd;;;;;;AAMAtC,cAAYyC,SAAZ,EAAuBC,UAAvB,EAAmCC,QAAnC,EAA6CC,MAA7C,EAAqD;AACjD;AACA,SAAKlG,EAAL,GAAUmD,OAAOnD,EAAP,EAAV,CAFiD,CAIjD;;AACA,SAAKkG,MAAL,GAAcA,UAAU,CAAxB,CALiD,CAOjD;;AACA,QAAIH,SAAJ,EAAe;AACX,WAAKA,SAAL,GAAiBA,SAAjB;AACH,KAVgD,CAYjD;;;AACA,QAAIC,UAAJ,EAAgB;AACZ,WAAKA,UAAL,GAAkBA,UAAlB;AACH,KAfgD,CAiBjD;;;AACA,QAAIC,aAAaE,SAAjB,EAA4B;AACxB;AACA,WAAKF,QAAL,GAAgB,KAAhB;AACH,KAHD,MAGO;AACH,WAAKA,QAAL,GAAgBA,QAAhB;AACH,KAvBgD,CAyBjD;;;AACA,SAAKG,eAAL,GAAuB,KAAK,CAA5B,CA1BiD,CA4BjD;;AACA,SAAKC,kBAAL,GAA0B,KAAK,CAA/B;AACH;AAED;;;;;;;;AAMAtB,aAAWC,KAAX,EAAkB;AACd;AACA;AACA,SAAKhF,EAAL,GAAUgF,MAAMhF,EAAN,IAAYmD,OAAOnD,EAAP,EAAtB,CAHc,CAKd;;AACA,SAAKiG,QAAL,GAAgBjB,MAAMiB,QAAtB;AACA,SAAKC,MAAL,GAAclB,MAAMkB,MAApB;AACA,SAAKH,SAAL,GAAiBf,MAAMe,SAAvB;AACA,SAAKC,UAAL,GAAkBhB,MAAMgB,UAAxB;AACH;AAED;;;;;;;AAKAM,sBAAoB;AAChB,QAAIC,iBAAiB,KAAKH,eAA1B,CADgB,CAEhB;;AACA,QAAIG,mBAAmB,KAAK,CAA5B,EAA+B;AAC3B,aAAOA,cAAP;AACH;;AAED,UAAMC,iBAAiBnB,OAAOoB,IAAP,CAAY,KAAKT,UAAjB,EAA6B,CAA7B,CAAvB;;AAEA,QAAIQ,mBAAmB,KAAK,CAA5B,EAA+B;AAC3BD,uBAAiBV,YAAYa,IAAZ,CAAiBC,cAAcH,mBAAmBG,WAAW3G,EAA7D,CAAjB;AACH,KAXe,CAahB;;;AACA,SAAKoG,eAAL,GAAuBG,cAAvB;AAEA,WAAOA,cAAP;AACH;AAEA;;;;;;AAIDK,mBAAiB;AACb;AACA,WAAO,KAAKb,SAAL,KAAmB,oBAA1B;AACH;AAED;;;;;;AAIAzB,gCAA8B;AAC1B,QAAI,CAAC,KAAKsC,cAAL,EAAL,EAA4B;AACxB,aAAO,CAAC,CAAR;AACH,KAHyB,CAK1B;;;AACA,UAAMC,wBAAwB,KAAKC,8BAAL,EAA9B;AACA,UAAM;AAAEjF,WAAF;AAASkF;AAAT,QAAuBF,qBAA7B;AACA,UAAMG,WAAWC,SAASpF,KAAT,EAAgB,EAAhB,KAAuB,CAAxC,CAR0B,CAQiB;AAE3C;;AACA,QAAIiE,cAAcoB,IAAd,CAAmBH,SAAnB,CAAJ,EAAmC;AAC/B;AACA,aAAOC,WAAW,CAAX,GAAe,CAAf,GAAmBA,QAA1B;AACH,KAdyB,CAgB1B;;;AACA,WAAO,CAAP;AACH;AAED;;;;;;AAIAF,mCAAiC;AAC7B,QAAIK,oBAAoB,KAAKd,kBAA7B,CAD6B,CAG7B;;AACA,QAAIc,sBAAsB,KAAK,CAA/B,EAAkC;AAC9B,aAAOA,iBAAP;AACH,KAN4B,CAQ7B;;;AACA,UAAMZ,iBAAiB,KAAKD,iBAAL,EAAvB,CAT6B,CAW7B;;AACA,QAAIC,mBAAmB,KAAK,CAA5B,EAA+B;AAC3B,YAAMQ,YAAYR,eAAeQ,SAAjC;AACA,YAAMK,mBAAmB,KAAKpB,UAAL,CAAgBe,SAAhB,CAAzB;;AAEA,UAAIK,gBAAJ,EAAsB;AAClB,cAAMC,sBAAsBd,eAAee,eAA3C;AACA,cAAMC,kBAAkBH,iBAAiBC,mBAAjB,CAAxB;AAEAF,4BAAoB;AAChBtF,iBAAO0F,eADS;AAEhBR,qBAAWR,eAAevG;AAFV,SAApB;AAKA,aAAKqG,kBAAL,GAA0Bc,iBAA1B;AACH;AACJ;;AAED,WAAOA,iBAAP;AACH;;AApJa,C;;;;;;;;;;;ACvBlB,IAAIhE,MAAJ;AAAW1D,OAAOC,KAAP,CAAaC,QAAQ,eAAR,CAAb,EAAsC;AAACwD,SAAOD,CAAP,EAAS;AAACC,aAAOD,CAAP;AAAS;;AAApB,CAAtC,EAA4D,CAA5D;;AAEX;;;;;;;AAOArE,GAAGsC,KAAH,GAAW,MAAMA,KAAN,CAAY;AACnBmC,cAAYzC,iBAAZ,EAA+B0C,IAA/B,EAAqC;AACjC;AACA,SAAKvD,EAAL,GAAUmD,OAAOnD,EAAP,EAAV,CAFiC,CAIjC;;AACA,SAAKuD,IAAL,GAAYA,IAAZ;AACA,SAAKiE,iBAAL,GAAyB3G,iBAAzB,CANiC,CAQjC;;AACA,SAAKO,SAAL,GAAiB,EAAjB,CATiC,CAWjC;;AACA,SAAKqC,WAAL,GAAmB,IAAIC,IAAJ,EAAnB;AACH;AAED;;;;;;;;;;;;AAUAyB,cAAY5B,IAAZ,EAAkB;AACd;AACA,QAAIkE,eAAepC,OAAOC,MAAP,CAAc,EAAd,EAAkB,IAAlB,CAAnB,CAFc,CAId;;AACA,QAAIoC,cAAc,IAAI7I,GAAGsC,KAAP,EAAlB,CALc,CAOd;;AACAsG,iBAAazH,EAAb,GAAkB0H,YAAY1H,EAA9B;AACA0H,gBAAY3C,UAAZ,CAAuB0C,YAAvB,EATc,CAWd;;AACA,QAAIlE,IAAJ,EAAU;AACNmE,kBAAYnE,IAAZ,GAAmBA,IAAnB;AACH,KAda,CAgBd;;;AACA,WAAOmE,WAAP;AACH;AAED;;;;;;;;AAMA3C,aAAWC,KAAX,EAAkB;AACd;AACA;AACA,SAAKhF,EAAL,GAAUgF,MAAMhF,EAAN,IAAYmD,OAAOnD,EAAP,EAAtB,CAHc,CAKd;;AACA,SAAKuD,IAAL,GAAYyB,MAAMzB,IAAlB,CANc,CAQd;AACA;;AACA,SAAKiE,iBAAL,GAAyB,IAAI3I,GAAGgC,iBAAP,EAAzB;AACA,SAAK2G,iBAAL,CAAuBzC,UAAvB,CAAkCC,MAAMwC,iBAAxC,EAXc,CAad;;AACA,QAAIxC,MAAM5D,SAAV,EAAqB;AACjB4D,YAAM5D,SAAN,CAAgBoD,OAAhB,CAAwBmD,kBAAkB;AACtC;AACA,YAAI3G,WAAW,IAAInC,GAAGoC,QAAP,EAAf;AACAD,iBAAS+D,UAAT,CAAoB4C,cAApB,EAHsC,CAKtC;;AACA,aAAKvG,SAAL,CAAeC,IAAf,CAAoBL,QAApB;AACH,OAPD;AAQH;AACJ;;AA5EkB,CAAvB,C;;;;;;;;;;;ACTA,IAAIqC,eAAJ;AAAoB5D,OAAOC,KAAP,CAAaC,QAAQ,wBAAR,CAAb,EAA+C;AAAC0D,kBAAgBH,CAAhB,EAAkB;AAACG,sBAAgBH,CAAhB;AAAkB;;AAAtC,CAA/C,EAAuF,CAAvF;;AAGpB;;;;;;;AAOArE,GAAGoC,QAAH,GAAc,MAAMA,QAAN,CAAe;AACzBqC,gBAAc;AACV,SAAKsE,gBAAL,GAAwB,EAAxB;AACA,SAAKpF,kBAAL,GAA0B,EAA1B;AACA,SAAKD,mBAAL,GAA2B,EAA3B;AACA,SAAKmC,kBAAL,GAA0B,EAA1B;AACH;AAED;;;;;;;;AAMAK,aAAWC,KAAX,EAAkB;AACd;AACA;AACA,QAAIA,MAAMxC,kBAAV,EAA8B;AAC1BwC,YAAMxC,kBAAN,CAAyBgC,OAAzB,CAAiCS,cAAc;AAC3C,YAAIN,OAAO,IAAI9F,GAAGyD,iBAAP,EAAX;AACAqC,aAAKI,UAAL,CAAgBE,UAAhB;AACA,aAAKzC,kBAAL,CAAwBnB,IAAxB,CAA6BsD,IAA7B;AACH,OAJD;AAKH,KATa,CAWd;AACA;;;AACA,QAAIK,MAAMzC,mBAAV,EAA+B;AAC3ByC,YAAMzC,mBAAN,CAA0BiC,OAA1B,CAAkCS,cAAc;AAC5C,YAAIN,OAAO,IAAI9F,GAAGsD,kBAAP,EAAX;AACAwC,aAAKI,UAAL,CAAgBE,UAAhB;AACA,aAAK1C,mBAAL,CAAyBlB,IAAzB,CAA8BsD,IAA9B;AACH,OAJD;AAKH,KAnBa,CAqBd;AACA;;;AACA,QAAIK,MAAMN,kBAAV,EAA8B;AAC1BM,YAAMN,kBAAN,CAAyBF,OAAzB,CAAiCS,cAAc;AAC3C,YAAIN,OAAO,IAAI9F,GAAGgJ,iBAAP,EAAX;AACAlD,aAAKI,UAAL,CAAgBE,UAAhB;AACA,aAAKP,kBAAL,CAAwBrD,IAAxB,CAA6BsD,IAA7B;AACH,OAJD;AAKH,KA7Ba,CA+Bd;;;AACA,QAAIK,MAAM4C,gBAAV,EAA4B;AACxB,WAAKA,gBAAL,GAAwB5C,MAAM4C,gBAA9B;AACH;AACJ;AAED;;;;;;;;;AAOAE,aAAWnD,IAAX,EAAiB;AACb,QAAIoD,KAAJ;;AACA,QAAIpD,gBAAgB9F,GAAGgJ,iBAAvB,EAA0C;AACtCE,cAAQ,KAAKrD,kBAAb;AACH,KAFD,MAEO,IAAIC,gBAAgB9F,GAAGsD,kBAAvB,EAA2C;AAC9C4F,cAAQ,KAAKxF,mBAAb;AACH,KAFM,MAEA,IAAIoC,gBAAgB9F,GAAGyD,iBAAvB,EAA0C;AAC7CyF,cAAQ,KAAKvF,kBAAb;AACH;;AAEDa,oBAAgB0E,KAAhB,EAAuBpD,IAAvB;AACH;;AArEwB,CAA7B,C;;;;;;;;;;;ACVA;;;;;;;AAOA9F,GAAGgC,iBAAH,GAAuB,MAAMA,iBAAN,CAAwB;AAC3CyC,cAAY0E,IAAZ,EAAkBC,UAAlB,EAA8B;AAC1B,SAAKD,IAAL,GAAYA,IAAZ;AACA,SAAKC,UAAL,GAAkBA,UAAlB;AACH;AAED;;;;;;;;AAMAlD,aAAWC,KAAX,EAAkB;AACd,SAAKgD,IAAL,GAAYhD,MAAMgD,IAAlB;AACA,SAAKC,UAAL,GAAkBjD,MAAMiD,UAAxB;AACH;AAED;;;;;;;AAKAC,0BAAwB;AACpB;AACA,YAAQ,KAAKF,IAAb;AACI,WAAK,MAAL;AACI,eAAO,YAAP;AAFR;AAIH;AAED;;;;;;;;AAMAG,oBAAkB;AACd;AACA,YAAQ,KAAKH,IAAb;AACI,WAAK,MAAL;AACI;AACA;AACA,eAAO,KAAKC,UAAL,CAAgBnH,IAAhB,GAAuB,KAAKmH,UAAL,CAAgBlH,OAA9C;AAJR;AAMH;;AA5C0C,CAA/C,C;;;;;;;;;;;ACPA,IAAI6E,IAAJ;AAASnG,OAAOC,KAAP,CAAaC,QAAQ,SAAR,CAAb,EAAgC;AAACiG,OAAK1C,CAAL,EAAO;AAAC0C,WAAK1C,CAAL;AAAO;;AAAhB,CAAhC,EAAkD,CAAlD;;AAET;;;;;;AAMArE,GAAGyD,iBAAH,GAAuB,MAAMA,iBAAN,SAAgCsD,IAAhC,CAAqC,EAA5D,C;;;;;;;;;;;ACRA,IAAIA,IAAJ;AAASnG,OAAOC,KAAP,CAAaC,QAAQ,SAAR,CAAb,EAAgC;AAACiG,OAAK1C,CAAL,EAAO;AAAC0C,WAAK1C,CAAL;AAAO;;AAAhB,CAAhC,EAAkD,CAAlD;;AAET;;;;;;AAMArE,GAAG8C,oBAAH,GAA0B,MAAMA,oBAAN,SAAmCiE,IAAnC,CAAwC,EAAlE,C;;;;;;;;;;;ACRA,IAAIA,IAAJ;AAASnG,OAAOC,KAAP,CAAaC,QAAQ,SAAR,CAAb,EAAgC;AAACiG,OAAK1C,CAAL,EAAO;AAAC0C,WAAK1C,CAAL;AAAO;;AAAhB,CAAhC,EAAkD,CAAlD;;AAET;;;;;;AAMArE,GAAGsD,kBAAH,GAAwB,MAAMA,kBAAN,SAAiCyD,IAAjC,CAAsC,EAA9D,C;;;;;;;;;;;ACRA,IAAIA,IAAJ;AAASnG,OAAOC,KAAP,CAAaC,QAAQ,SAAR,CAAb,EAAgC;AAACiG,OAAK1C,CAAL,EAAO;AAAC0C,WAAK1C,CAAL;AAAO;;AAAhB,CAAhC,EAAkD,CAAlD;;AAET;;;;;;AAMArE,GAAGgJ,iBAAH,GAAuB,MAAMA,iBAAN,SAAgCjC,IAAhC,CAAqC,EAA5D,C;;;;;;;;;;;ACRAnG,OAAOkG,MAAP,CAAc;AAACE,eAAY,MAAIA;AAAjB,CAAd;AAAA,MAAMA,cAAc,CAAC;AACjB7F,MAAI,QADa;AAEjBuD,QAAM,YAFW;AAGjBwD,aAAW,QAHM;AAIjBO,mBAAiB,OAJA;AAKjBc,eAAa;AALI,CAAD,EAMjB;AACCpI,MAAI,cADL;AAECuD,QAAM,qBAFP;AAGCwD,aAAW,cAHZ;AAICO,mBAAiB,OAJlB;AAKCc,eAAa;AALd,CANiB,EAYjB;AACCpI,MAAI,UADL;AAECuD,QAAM,UAFP;AAGCwD,aAAW,UAHZ;AAICO,mBAAiB,OAJlB;AAKCc,eAAa;AALd,CAZiB,EAkBjB;AACCpI,MAAI,gBADL;AAECuD,QAAM,kBAFP;AAGCwD,aAAW,gBAHZ;AAICO,mBAAiB,OAJlB;AAKCc,eAAa;AALd,CAlBiB,EAwBjB;AACCpI,MAAI,YADL;AAECuD,QAAM,aAFP;AAGCwD,aAAW,YAHZ;AAICO,mBAAiB,OAJlB;AAKCc,eAAa;AALd,CAxBiB,EA8BjB;AACCpI,MAAI,UADL;AAECuD,QAAM,WAFP;AAGCwD,aAAW,UAHZ;AAICO,mBAAiB,OAJlB;AAKCc,eAAa;AALd,CA9BiB,EAoCjB;AACCpI,MAAI,aADL;AAECuD,QAAM,eAFP;AAGCwD,aAAW,cAHZ;AAICO,mBAAiB,aAJlB;AAKCc,eAAa;AALd,CApCiB,EA0CjB;AACCpI,MAAI,aADL;AAECuD,QAAM,kBAFP;AAGCwD,aAAW,cAHZ;AAICO,mBAAiB,aAJlB;AAKCc,eAAa;AALd,CA1CiB,EAgDjB;AACCpI,MAAI,sBADL;AAECuD,QAAM,+BAFP;AAGCwD,aAAW,cAHZ;AAICO,mBAAiB,sBAJlB;AAKCc,eAAa;AALd,CAhDiB,EAsDjB;AACCpI,MAAI,mBADL;AAECuD,QAAM,4BAFP;AAGCwD,aAAW,cAHZ;AAICO,mBAAiB,mBAJlB;AAKCc,eAAa;AALd,CAtDiB,EA4DjB;AACCpI,MAAI,UADL;AAECuD,QAAM,eAFP;AAGCwD,aAAW,cAHZ;AAICO,mBAAiB,UAJlB;AAKCc,eAAa;AALd,CA5DiB,EAkEjB;AACCpI,MAAI,KADL;AAECuD,QAAM,KAFP;AAGCwD,aAAW,cAHZ;AAICO,mBAAiB,KAJlB;AAKCc,eAAa;AALd,CAlEiB,EAwEjB;AACCpI,MAAI,MADL;AAECuD,QAAM,MAFP;AAGCwD,aAAW,cAHZ;AAICO,mBAAiB,MAJlB;AAKCc,eAAa;AALd,CAxEiB,CAApB,C,CAgFA;;AACA/C,OAAOgD,MAAP,CAAcxC,WAAd,E;;;;;;;;;;;ACjFApG,OAAOkG,MAAP,CAAc;AAACtC,mBAAgB,MAAIA;AAArB,CAAd;;AAAqD,IAAIiF,CAAJ;;AAAM7I,OAAOC,KAAP,CAAaC,QAAQ,mBAAR,CAAb,EAA0C;AAAC2I,IAAEpF,CAAF,EAAI;AAACoF,QAAEpF,CAAF;AAAI;;AAAV,CAA1C,EAAsD,CAAtD;;AAE3D;;;;;;;;AAQA,MAAMG,kBAAkB,CAAC0E,KAAD,EAAQ/C,KAAR,KAAkB;AACtC;AACA,MAAI,CAAC+C,KAAD,IACA,CAACA,MAAMQ,MADX,EACmB;AACf,WAAO,KAAP;AACH;;AAEDR,QAAMvD,OAAN,CAAc,CAAC3C,KAAD,EAAQ2G,KAAR,KAAkB;AAC5B,QAAIF,EAAEG,OAAF,CAAU5G,KAAV,EAAiBmD,KAAjB,CAAJ,EAA6B;AACzB0D,sBAAgBF,KAAhB;AACA,aAAO,KAAP;AACH;AACJ,GALD;;AAOA,MAAIE,kBAAkB,KAAK,CAA3B,EAA8B;AAC1B,WAAO,KAAP;AACH;;AAEDX,QAAMY,MAAN,CAAaD,aAAb,EAA4B,CAA5B;AACA,SAAO,IAAP;AACH,CApBD,C;;;;;;;;;;;ACVA3J,OAAO6J,OAAP,CAAe,kBAAf,EAAmC,YAAW;AAC1C;AACA,SAAO9J,iBAAiB4H,IAAjB,EAAP;AACH,CAHD,E","file":"/packages/ohif_hanging-protocols.js","sourcesContent":["HP = {};\n","HangingProtocols = new Meteor.Collection('hangingprotocols');\nHangingProtocols._debugName = 'HangingProtocols';\n\nHangingProtocols.allow({\n    insert: function() {\n        return true;\n    },\n    update: function() {\n        return true;\n    },\n    remove: function() {\n        return true;\n    }\n});\n\n// @TODO: Remove this after stabilizing ProtocolEngine\nif (Meteor.isDevelopment && Meteor.isServer) {\n    Meteor.startup(() => {\n        HangingProtocols.remove({});\n    });\n}\n","// @TODO start using namespace instead\n\n// Base classes\nimport './classes/Protocol';\nimport './classes/Stage';\nimport './classes/Viewport';\nimport './classes/ViewportStructure';\n\n// Specialized Rule classes\nimport './classes/rules/ProtocolMatchingRule';\nimport './classes/rules/StudyMatchingRule';\nimport './classes/rules/SeriesMatchingRule';\nimport './classes/rules/ImageMatchingRule';\n","HP.attributeDefaults = {\n    abstractPriorValue: 0\n};\n\nHP.displaySettings = {\n    invert: {\n        id: 'invert',\n        text: 'Show Grayscale Inverted',\n        defaultValue: 'NO',\n        options: ['YES', 'NO']\n    }\n};\n\n// @TODO Fix abstractPriorValue comparison\nHP.studyAttributes = [{\n    id: 'x00100020',\n    text: '(x00100020) Patient ID'\n}, {\n    id: 'x0020000d',\n    text: '(x0020000d) Study Instance UID'\n}, {\n    id: 'x00080020',\n    text: '(x00080020) Study Date'\n}, {\n    id: 'x00080030',\n    text: '(x00080030) Study Time'\n}, {\n    id: 'x00081030',\n    text: '(x00081030) Study Description'\n}, {\n    id: 'abstractPriorValue',\n    text: 'Abstract Prior Value'\n}];\n\nHP.protocolAttributes = [{\n    id: 'x00100020',\n    text: '(x00100020) Patient ID'\n}, {\n    id: 'x0020000d',\n    text: '(x0020000d) Study Instance UID'\n}, {\n    id: 'x00080020',\n    text: '(x00080020) Study Date'\n}, {\n    id: 'x00080030',\n    text: '(x00080030) Study Time'\n}, {\n    id: 'x00081030',\n    text: '(x00081030) Study Description'\n}, {\n    id: 'anatomicRegion',\n    text: 'Anatomic Region'\n}];\n\nHP.seriesAttributes = [{\n    id: 'x0020000e',\n    text: '(x0020000e) Series Instance UID'\n}, {\n    id: 'x00080060',\n    text: '(x00080060) Modality'\n}, {\n    id: 'x00200011',\n    text: '(x00200011) Series Number'\n}, {\n    id: 'x0008103e',\n    text: '(x0008103e) Series Description'\n}, {\n    id: 'numImages',\n    text: 'Number of Images'\n}];\n\nHP.instanceAttributes = [{\n    id: 'x00080016',\n    text: '(x00080016) SOP Class UID'\n}, {\n    id: 'x00080018',\n    text: '(x00080018) SOP Instance UID'\n}, {\n    id: 'x00185101',\n    text: '(x00185101) View Position'\n}, {\n    id: 'x00200013',\n    text: '(x00200013) Instance Number'\n}, {\n    id: 'x00080008',\n    text: '(x00080008) Image Type'\n}, {\n    id: 'x00181063',\n    text: '(x00181063) Frame Time'\n}, {\n    id: 'x00200060',\n    text: '(x00200060) Laterality'\n}, {\n    id: 'x00541330',\n    text: '(x00541330) Image Index'\n}, {\n    id: 'x00280004',\n    text: '(x00280004) Photometric Interpretation'\n}, {\n    id: 'x00180050',\n    text: '(x00180050) Slice Thickness'\n}];\n","function getDefaultProtocol() {\n    var protocol = new HP.Protocol('Default');\n    protocol.id = 'defaultProtocol';\n    protocol.locked = true;\n\n    var oneByOne = new HP.ViewportStructure('grid', {\n        rows: 1,\n        columns: 1\n    });\n\n    var viewport = new HP.Viewport();\n    var first = new HP.Stage(oneByOne, 'oneByOne');\n    first.viewports.push(viewport);\n\n    protocol.stages.push(first);\n\n    HP.defaultProtocol = protocol;\n    return HP.defaultProtocol;\n}\n\nfunction getMRTwoByTwoTest() {\n    var proto = new HP.Protocol('MR_TwoByTwo');\n    proto.id = 'MR_TwoByTwo';\n    proto.locked = true;\n    // Use http://localhost:3000/viewer/1.2.840.113619.2.5.1762583153.215519.978957063.78\n\n    var studyInstanceUid = new HP.ProtocolMatchingRule('studyInstanceUid', {\n        equals: {\n            value: '1.2.840.113619.2.5.1762583153.215519.978957063.78'\n        }\n    }, true);\n\n    proto.addProtocolMatchingRule(studyInstanceUid);\n\n    var oneByTwo = new HP.ViewportStructure('grid', {\n        rows: 1,\n        columns: 2\n    });\n\n    // Stage 1\n    var left = new HP.Viewport();\n    var right = new HP.Viewport();\n\n    var firstSeries = new HP.SeriesMatchingRule('seriesNumber', {\n        equals: {\n            value: 1\n        }\n    });\n\n    var secondSeries = new HP.SeriesMatchingRule('seriesNumber', {\n        equals: {\n            value: 2\n        }\n    });\n\n    var thirdImage = new HP.ImageMatchingRule('instanceNumber', {\n        equals: {\n            value: 3\n        }\n    });\n\n    left.seriesMatchingRules.push(firstSeries);\n    left.imageMatchingRules.push(thirdImage);\n\n    right.seriesMatchingRules.push(secondSeries);\n    right.imageMatchingRules.push(thirdImage);\n\n    var first = new HP.Stage(oneByTwo, 'oneByTwo');\n    first.viewports.push(left);\n    first.viewports.push(right);\n\n    proto.stages.push(first);\n\n    // Stage 2\n    var twoByOne = new HP.ViewportStructure('grid', {\n        rows: 2,\n        columns: 1\n    });\n    var left2 = new HP.Viewport();\n    var right2 = new HP.Viewport();\n\n    var fourthSeries = new HP.SeriesMatchingRule('seriesNumber', {\n        equals: {\n            value: 4\n        }\n    });\n\n    var fifthSeries = new HP.SeriesMatchingRule('seriesNumber', {\n        equals: {\n            value: 5\n        }\n    });\n\n    left2.seriesMatchingRules.push(fourthSeries);\n    left2.imageMatchingRules.push(thirdImage);\n    right2.seriesMatchingRules.push(fifthSeries);\n    right2.imageMatchingRules.push(thirdImage);\n\n    var second = new HP.Stage(twoByOne, 'twoByOne');\n    second.viewports.push(left2);\n    second.viewports.push(right2);\n\n    proto.stages.push(second);\n\n    HP.testProtocol = proto;\n    return HP.testProtocol;\n}\n\nfunction getDemoProtocols() {\n\n    HP.demoProtocols = [];\n\n    /**\n     * Demo #1\n     */\n    HP.demoProtocols.push({\n        \"id\": \"demoProtocol1\",\n        \"locked\": false,\n        \"name\": \"DFCI-CT-CHEST-COMPARE\",\n        \"createdDate\": \"2017-02-14T16:07:09.033Z\",\n        \"modifiedDate\": \"2017-02-14T16:18:43.930Z\",\n        \"availableTo\": {},\n        \"editableBy\": {},\n        \"protocolMatchingRules\": [\n            {\n                \"id\": \"7tmuq7KzDMCWFeapc\",\n                \"weight\": 2,\n                \"required\": false,\n                \"attribute\": \"x00081030\",\n                \"constraint\": {\n                    \"contains\": {\n                        \"value\": \"DFCI CT CHEST\"\n                    }\n                }\n            }\n        ],\n        \"stages\": [\n            {\n                \"id\": \"v5PfGt9F6mffZPif5\",\n                \"name\": \"oneByOne\",\n                \"viewportStructure\": {\n                    \"type\": \"grid\",\n                    \"properties\": {\n                        \"rows\": 1,\n                        \"columns\": 2\n                    },\n                    \"layoutTemplateName\": \"gridLayout\"\n                },\n                \"viewports\": [\n                    {\n                        \"viewportSettings\": {},\n                        \"imageMatchingRules\": [],\n                        \"seriesMatchingRules\": [\n                            {\n                                \"id\": \"mXnsCcNzZL56z7mTZ\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"x0008103e\",\n                                \"constraint\": {\n                                    \"contains\": {\n                                        \"value\": \"2.0\"\n                                    }\n                                }\n                            }\n                        ],\n                        \"studyMatchingRules\": []\n                    },\n                    {\n                        \"viewportSettings\": {},\n                        \"imageMatchingRules\": [],\n                        \"seriesMatchingRules\": [\n                            {\n                                \"id\": \"ygz4nb28iJZcJhnYa\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"x0008103e\",\n                                \"constraint\": {\n                                    \"contains\": {\n                                        \"value\": \"2.0\"\n                                    }\n                                }\n                            }\n                        ],\n                        \"studyMatchingRules\": [\n                            {\n                                \"id\": \"uDoEgLTvnXTByWnPz\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"abstractPriorValue\",\n                                \"constraint\": {\n                                    \"equals\": {\n                                        \"value\": 1\n                                    }\n                                }\n                            }\n                        ]\n                    }\n                ],\n                \"createdDate\": \"2017-02-14T16:07:09.033Z\"\n            },\n            {\n                \"id\": \"XTzu8HB3feep3HYKs\",\n                \"viewportStructure\": {\n                    \"type\": \"grid\",\n                    \"properties\": {\n                        \"rows\": 1,\n                        \"columns\": 2\n                    },\n                    \"layoutTemplateName\": \"gridLayout\"\n                },\n                \"viewports\": [\n                    {\n                        \"viewportSettings\": {},\n                        \"imageMatchingRules\": [],\n                        \"seriesMatchingRules\": [\n                            {\n                                \"id\": \"mXnsCcNzZL56z7mTZ\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"x0008103e\",\n                                \"constraint\": {\n                                    \"contains\": {\n                                        \"value\": \"3.0\"\n                                    }\n                                }\n                            }\n                        ],\n                        \"studyMatchingRules\": []\n                    },\n                    {\n                        \"viewportSettings\": {},\n                        \"imageMatchingRules\": [],\n                        \"seriesMatchingRules\": [\n                            {\n                                \"id\": \"ygz4nb28iJZcJhnYa\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"x0008103e\",\n                                \"constraint\": {\n                                    \"contains\": {\n                                        \"value\": \"3.0\"\n                                    }\n                                }\n                            }\n                        ],\n                        \"studyMatchingRules\": [\n                            {\n                                \"id\": \"uDoEgLTvnXTByWnPz\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"abstractPriorValue\",\n                                \"constraint\": {\n                                    \"equals\": {\n                                        \"value\": 1\n                                    }\n                                }\n                            }\n                        ]\n                    }\n                ],\n                \"createdDate\": \"2017-02-14T16:07:12.085Z\"\n            },\n            {\n                \"id\": \"3yPYNaeFtr76Qz3jq\",\n                \"viewportStructure\": {\n                    \"type\": \"grid\",\n                    \"properties\": {\n                        \"rows\": 2,\n                        \"columns\": 2\n                    },\n                    \"layoutTemplateName\": \"gridLayout\"\n                },\n                \"viewports\": [\n                    {\n                        \"viewportSettings\": {},\n                        \"imageMatchingRules\": [],\n                        \"seriesMatchingRules\": [\n                            {\n                                \"id\": \"mXnsCcNzZL56z7mTZ\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"x0008103e\",\n                                \"constraint\": {\n                                    \"contains\": {\n                                        \"value\": \"Body 3.0\"\n                                    }\n                                }\n                            }\n                        ],\n                        \"studyMatchingRules\": []\n                    },\n                    {\n                        \"viewportSettings\": {\n                            \"wlPreset\": \"Lung\"\n                        },\n                        \"imageMatchingRules\": [],\n                        \"seriesMatchingRules\": [\n                            {\n                                \"id\": \"ygz4nb28iJZcJhnYa\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"x0008103e\",\n                                \"constraint\": {\n                                    \"contains\": {\n                                        \"value\": \"Lung 3.0\"\n                                    }\n                                }\n                            }\n                        ],\n                        \"studyMatchingRules\": []\n                    },\n                    {\n                        \"viewportSettings\": {},\n                        \"imageMatchingRules\": [],\n                        \"seriesMatchingRules\": [\n                            {\n                                \"id\": \"6vdBRZYnqmmosipph\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"x0008103e\",\n                                \"constraint\": {\n                                    \"contains\": {\n                                        \"value\": \"Body 3.0\"\n                                    }\n                                }\n                            }\n                        ],\n                        \"studyMatchingRules\": [\n                            {\n                                \"id\": \"SxfTyhGcMhr56PtPM\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"abstractPriorValue\",\n                                \"constraint\": {\n                                    \"equals\": {\n                                        \"value\": 1\n                                    }\n                                }\n                            }\n                        ]\n                    },\n                    {\n                        \"viewportSettings\": {\n                            \"wlPreset\": \"Lung\"\n                        },\n                        \"imageMatchingRules\": [],\n                        \"seriesMatchingRules\": [\n                            {\n                                \"id\": \"FTAyChZCPW68yJjXD\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"x0008103e\",\n                                \"constraint\": {\n                                    \"contains\": {\n                                        \"value\": \"Lung 3.0\"\n                                    }\n                                }\n                            }\n                        ],\n                        \"studyMatchingRules\": [\n                            {\n                                \"id\": \"gMJjfrbsqYNbErPx5\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"abstractPriorValue\",\n                                \"constraint\": {\n                                    \"equals\": {\n                                        \"value\": 1\n                                    }\n                                }\n                            }\n                        ]\n                    }\n                ],\n                \"createdDate\": \"2017-02-14T16:11:40.489Z\"\n            }\n        ],\n        \"numberOfPriorsReferenced\": 4\n    });\n\n    /**\n     * Demo #2\n     */\n\n    HP.demoProtocols.push({\n        \"id\": \"demoProtocol2\",\n        \"locked\": false,\n        \"name\": \"DFCI-CT-CHEST-COMPARE-2\",\n        \"createdDate\": \"2017-02-14T16:07:09.033Z\",\n        \"modifiedDate\": \"2017-02-14T16:18:43.930Z\",\n        \"availableTo\": {},\n        \"editableBy\": {},\n        \"protocolMatchingRules\": [{\n            \"id\": \"7tmuq7KzDMCWFeapc\",\n            \"weight\": 2,\n            \"required\": false,\n            \"attribute\": \"x00081030\",\n            \"constraint\": {\n                \"contains\": {\n                    \"value\": \"DFCI CT CHEST\"\n                }\n            }\n        }],\n        \"stages\": [{\n            \"id\": \"v5PfGt9F6mffZPif5\",\n            \"name\": \"oneByOne\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 1,\n                    \"columns\": 2\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL56z7mac\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"2.0\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"ygz4nb28iJZcJhnYc\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"2.0\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": [{\n                    \"id\": \"uDoEgLTvnXTByWnPt\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"abstractPriorValue\",\n                    \"constraint\": {\n                        \"equals\": {\n                            \"value\": 1\n                        }\n                    }\n                }]\n            }],\n            \"createdDate\": \"2017-02-14T16:07:09.033Z\"\n        }, {\n            \"id\": \"XTzu8HB3feep3HYKs\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 1,\n                    \"columns\": 2\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 3.0\"\n                        }\n                    }\n                }, {\n                    \"id\": \"mYnsCcNwZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 5.0\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"ygz4nb28iJZcJhnYa\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 3.0\"\n                        }\n                    }\n                }, {\n                    \"id\": \"ygz4nb29iJZcJhnYa\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 5.0\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": [{\n                    \"id\": \"uDoEgLTvnXTByWnPz\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"abstractPriorValue\",\n                    \"constraint\": {\n                        \"equals\": {\n                            \"value\": 1\n                        }\n                    }\n                }]\n            }],\n            \"createdDate\": \"2017-02-14T16:07:12.085Z\"\n        }, {\n            \"id\": \"3yPYNaeFtr76Qz3jq\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 2,\n                    \"columns\": 2\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL56z7mtr\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 3.0\"\n                        }\n                    }\n                }, {\n                    \"id\": \"jXnsCcNzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 5.0\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {\n                    \"wlPreset\": \"Lung\"\n                },\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"ygz4nb28iJZcJhnYb\",\n                    \"weight\": 2,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Lung 3.0\"\n                        }\n                    }\n                }, {\n                    \"id\": \"ycz4nb28iJZcJhnYa\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Lung 5.0\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"6vdBRZYnqmmosipph\",\n                    \"weight\": 2,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 3.0\"\n                        }\n                    }\n                }, {\n                    \"id\": \"6vdBRFYnqmmosipph\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 5.0\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": [{\n                    \"id\": \"SxfTyhGcMhr56PtPM\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"abstractPriorValue\",\n                    \"constraint\": {\n                        \"equals\": {\n                            \"value\": 1\n                        }\n                    }\n                }]\n            }, {\n                \"viewportSettings\": {\n                    \"wlPreset\": \"Lung\"\n                },\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"FTAyChZCPW68yJjXD\",\n                    \"weight\": 2,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Lung 3.0\"\n                        }\n                    }\n                }, {\n                    \"id\": \"DTAyChZCPW68yJjXD\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Lung 5.0\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": [{\n                    \"id\": \"gMJjfrbsqYNbErPx5\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"abstractPriorValue\",\n                    \"constraint\": {\n                        \"equals\": {\n                            \"value\": 1\n                        }\n                    }\n                }]\n            }],\n            \"createdDate\": \"2017-02-14T16:11:40.489Z\"\n        }],\n        \"numberOfPriorsReferenced\": 1\n    });\n\n    /**\n     * Demo: screenCT\n     */\n\n    HP.demoProtocols.push({\n        \"id\": \"screenCT\",\n        \"locked\": false,\n        \"name\": \"DFCI-CT-CHEST-SCREEN\",\n        \"createdDate\": \"2017-02-14T16:07:09.033Z\",\n        \"modifiedDate\": \"2017-02-14T16:18:43.930Z\",\n        \"availableTo\": {},\n        \"editableBy\": {},\n        \"protocolMatchingRules\": [{\n            \"id\": \"7tmuq7KzDMCWFeapc\",\n            \"weight\": 2,\n            \"required\": false,\n            \"attribute\": \"x00081030\",\n            \"constraint\": {\n                \"contains\": {\n                    \"value\": \"DFCI CT CHEST\"\n                }\n            }\n        }],\n        \"stages\": [{\n            \"id\": \"v5PfGt9F6mffZPif5\",\n            \"name\": \"oneByOne\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 1,\n                    \"columns\": 1\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL55z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"2.0\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }],\n            \"createdDate\": \"2017-02-14T16:07:09.033Z\"\n        },\n        {\n            \"id\": \"v5PfGt9F4mffZPif5\",\n            \"name\": \"oneByOne\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 2,\n                    \"columns\": 2\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL56z7nTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 5.0\"\n                        }\n                    }\n                }, {\n                    \"id\": \"mXnsCcNzZL56z7rTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 3.0\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL56r7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Lung 5.0\"\n                        }\n                    }\n                }, {\n                    \"id\": \"mXnsCcNzZL56a7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Lung 3.0\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcRzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 4.0\"\n                        }\n                    }\n                }, {\n                    \"id\": \"mXnsCcNzTL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Coronal\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcMzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 4.0\"\n                        }\n                    }\n                }, {\n                    \"id\": \"mXnsCcAzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Sagittal\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }],\n            \"createdDate\": \"2017-02-14T16:07:09.033Z\"\n        }],\n        \"numberOfPriorsReferenced\": 0\n    });\n\n    /**\n     * Demo: PETCTSCREEN\n     */\n\n    HP.demoProtocols.push({\n        \"id\": \"PETCTSCREEN\",\n        \"locked\": false,\n        \"name\": \"PETCT-SCREEN\",\n        \"createdDate\": \"2017-02-14T16:07:09.033Z\",\n        \"modifiedDate\": \"2017-02-14T16:18:43.930Z\",\n        \"availableTo\": {},\n        \"editableBy\": {},\n        \"protocolMatchingRules\": [{\n            \"id\": \"7tmuqgKzDMCWFeapc\",\n            \"weight\": 5,\n            \"required\": false,\n            \"attribute\": \"x00081030\",\n            \"constraint\": {\n                \"contains\": {\n                    \"value\": \"PETCT\"\n                }\n            }\n        }],\n        \"stages\": [{\n            \"id\": \"v5PfGt9F6mFgZPif5\",\n            \"name\": \"oneByOne\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 1,\n                    \"columns\": 2\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcAzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Topogram\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZR56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Topogram\"\n                        }\n                    }\n                }, {\n                    \"id\": \"mRnsCcNzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x00200011\",\n                    \"constraint\": {\n                        \"numericality\": {\n                            \"greaterThanOrEqualTo\": 2\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }],\n            \"createdDate\": \"2017-02-14T16:07:09.033Z\"\n        }, {\n            \"id\": \"v5PfGt9F6mFgZPif5\",\n            \"name\": \"oneByOne\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 1,\n                    \"columns\": 2\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsGcNzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"PET WB Corrected\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsHcNzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"CT WB\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }],\n            \"createdDate\": \"2017-02-14T16:07:09.033Z\"\n        }, {\n            \"id\": \"v5PfGt9F6mFgZPif5\",\n            \"name\": \"oneByOne\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 1,\n                    \"columns\": 2\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {\n                    \"invert\": \"YES\"\n                },\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXneCcNzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"PET WB Uncorrected\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCuNzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"CT Nk\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }],\n            \"createdDate\": \"2017-02-14T16:07:09.033Z\"\n        }],\n        \"numberOfPriorsReferenced\": 0\n    });\n\n    /**\n     * Demo: PETCTCOMPARE\n     */\n\n    HP.demoProtocols.push({\n        \"id\": \"PETCTCOMPARE\",\n        \"locked\": false,\n        \"name\": \"PETCT-COMPARE\",\n        \"createdDate\": \"2017-02-14T16:07:09.033Z\",\n        \"modifiedDate\": \"2017-02-14T16:18:43.930Z\",\n        \"availableTo\": {},\n        \"editableBy\": {},\n        \"protocolMatchingRules\": [{\n            \"id\": \"7tmuqgKzDMCWFeapc\",\n            \"weight\": 5,\n            \"required\": false,\n            \"attribute\": \"x00081030\",\n            \"constraint\": {\n                \"contains\": {\n                    \"value\": \"PETCT\"\n                }\n            }\n        }],\n        \"stages\": [{\n            \"id\": \"v5PfGt9F6mFgZPif5\",\n            \"name\": \"oneByOne\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 1,\n                    \"columns\": 2\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL59z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Topogram\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL56z7lTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Topogram\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": [{\n                    \"id\": \"uDoEgLTbnXTByWnPz\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"abstractPriorValue\",\n                    \"constraint\": {\n                        \"equals\": {\n                            \"value\": 1\n                        }\n                    }\n                }]\n            }],\n            \"createdDate\": \"2017-02-14T16:07:09.033Z\"\n        }, {\n            \"id\": \"v5PfGt9F6mFgZPif5\",\n            \"name\": \"oneByOne\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 1,\n                    \"columns\": 2\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNjZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Topogram\"\n                        }\n                    }\n                }, {\n                    \"id\": \"mXnsCcNzZL56z7gTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x00200011\",\n                    \"constraint\": {\n                        \"numericality\": {\n                            \"greaterThanOrEqualTo\": 2\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcCzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Topogram\"\n                        }\n                    }\n                }, {\n                    \"id\": \"mXnsCcNzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x00200011\",\n                    \"constraint\": {\n                        \"numericality\": {\n                            \"greaterThanOrEqualTo\": 2\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": [{\n                    \"id\": \"uDoEgLTvn1TByWnPz\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"abstractPriorValue\",\n                    \"constraint\": {\n                        \"equals\": {\n                            \"value\": 1\n                        }\n                    }\n                }]\n            }],\n            \"createdDate\": \"2017-02-14T16:07:09.033Z\"\n        }, {\n            \"id\": \"v5PfGt9F6mFgZPif5\",\n            \"name\": \"oneByOne\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 2,\n                    \"columns\": 2\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL26z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"PET WB Corrected\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL46z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"CT WB\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL57z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"PET WB Corrected\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": [{\n                    \"id\": \"uDoEgLTvnYTByWnPz\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"abstractPriorValue\",\n                    \"constraint\": {\n                        \"equals\": {\n                            \"value\": 1\n                        }\n                    }\n                }]\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZQ56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"CT WB\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": [{\n                    \"id\": \"uDoEgLTvnKTByWnPz\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"abstractPriorValue\",\n                    \"constraint\": {\n                        \"equals\": {\n                            \"value\": 1\n                        }\n                    }\n                }]\n            }],\n            \"createdDate\": \"2017-02-14T16:07:09.033Z\"\n        }, {\n            \"id\": \"v5PfGt9F6mFgZPif5\",\n            \"name\": \"oneByOne\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 2,\n                    \"columns\": 2\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {\n                    \"invert\": \"YES\"\n                },\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL56z7nTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"PET WB Uncorrected\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNxZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"CT Nk\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {\n                    \"invert\": \"YES\"\n                },\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZA56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"PET WB Uncorrected\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": [{\n                    \"id\": \"uDoEgHTvnXTByWnPz\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"abstractPriorValue\",\n                    \"constraint\": {\n                        \"equals\": {\n                            \"value\": 1\n                        }\n                    }\n                }]\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZP56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"CT Nk\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": [{\n                    \"id\": \"uDoEgITvnXTByWnPz\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"abstractPriorValue\",\n                    \"constraint\": {\n                        \"equals\": {\n                            \"value\": 1\n                        }\n                    }\n                }]\n            }],\n            \"createdDate\": \"2017-02-14T16:07:09.033Z\"\n        }],\n        \"numberOfPriorsReferenced\": 1\n    });\n\n}\n\ngetDefaultProtocol();\n//getMRTwoByTwoTest();\n//getDemoProtocols();\n","import { Meteor } from 'meteor/meteor';\nimport { Random } from 'meteor/random';\nimport { OHIF } from 'meteor/ohif:core';\n\n// Local imports\nimport { removeFromArray } from '../lib/removeFromArray';\n\n/**\n * This class represents a Hanging Protocol at the highest level\n *\n * @type {Protocol}\n */\nHP.Protocol = class Protocol {\n    /**\n     * The Constructor for the Class to create a Protocol with the bare\n     * minimum information\n     *\n     * @param name The desired name for the Protocol\n     */\n    constructor(name) {\n        // Create a new UUID for this Protocol\n        this.id = Random.id();\n\n        // Store a value which determines whether or not a Protocol is locked\n        // This is probably temporary, since we will eventually have role / user\n        // checks for editing. For now we just need it to prevent changes to the\n        // default protocols.\n        this.locked = false;\n\n        // Boolean value to indicate if the protocol has updated priors information\n        // it's set in \"updateNumberOfPriorsReferenced\" function\n        this.hasUpdatedPriorsInformation = false;\n\n        // Apply the desired name\n        this.name = name;\n\n        // Set the created and modified dates to Now\n        this.createdDate = new Date();\n        this.modifiedDate = new Date();\n\n        // If we are logged in while creating this Protocol,\n        // store this information as well\n        if (OHIF.user && OHIF.user.userLoggedIn && OHIF.user.userLoggedIn()) {\n            this.createdBy = OHIF.user.getUserId();\n            this.modifiedBy = OHIF.user.getUserId();\n        }\n\n        // Create two empty Sets specifying which roles\n        // have read and write access to this Protocol\n        this.availableTo = new Set();\n        this.editableBy = new Set();\n\n        // Define empty arrays for the Protocol matching rules\n        // and Stages\n        this.protocolMatchingRules = [];\n        this.stages = [];\n\n        // Define auxiliary values for priors\n        this.numberOfPriorsReferenced = -1;\n    }\n\n    getNumberOfPriorsReferenced(skipCache = false) {\n        let numberOfPriorsReferenced = skipCache !== true ? this.numberOfPriorsReferenced : -1;\n\n        // Check if information is cached already\n        if (numberOfPriorsReferenced > -1) {\n            return numberOfPriorsReferenced;\n        }\n\n        numberOfPriorsReferenced = 0;\n\n        // Search each study matching rule for prior rules\n        // Each stage can have many viewports that can have\n        // multiple study matching rules.\n        this.stages.forEach(stage => {\n            if (!stage.viewports) {\n                return;\n            }\n\n            stage.viewports.forEach(viewport => {\n                if (!viewport.studyMatchingRules) {\n                    return;\n                }\n\n                viewport.studyMatchingRules.forEach(rule => {\n                    // If the current rule is not a priors rule, it will return -1 then numberOfPriorsReferenced will continue to be 0\n                    const priorsReferenced = rule.getNumberOfPriorsReferenced();\n                    if (priorsReferenced > numberOfPriorsReferenced) {\n                        numberOfPriorsReferenced = priorsReferenced;\n                    }\n                });\n            });\n        });\n\n        this.numberOfPriorsReferenced = numberOfPriorsReferenced;\n\n        return numberOfPriorsReferenced\n    }\n\n    updateNumberOfPriorsReferenced() {\n        this.getNumberOfPriorsReferenced(true);\n    }\n\n    /**\n     * Method to update the modifiedDate when the Protocol\n     * has been changed\n     */\n    protocolWasModified() {\n        // If we are logged in while modifying this Protocol,\n        // store this information as well\n        if (OHIF.user && OHIF.user.userLoggedIn && OHIF.user.userLoggedIn()) {\n            this.modifiedBy = OHIF.user.getUserId();\n        }\n\n        // Protocol has been modified, so mark priors information\n        // as \"outdated\"\n        this.hasUpdatedPriorsInformation = false;\n\n        // Update number of priors referenced info\n        this.updateNumberOfPriorsReferenced();\n\n        // Update the modifiedDate with the current Date/Time\n        this.modifiedDate = new Date();\n    }\n\n    /**\n     * Occasionally the Protocol class needs to be instantiated from a JavaScript Object\n     * containing the Protocol data. This function fills in a Protocol with the Object\n     * data.\n     *\n     * @param input A Protocol as a JavaScript Object, e.g. retrieved from MongoDB or JSON\n     */\n    fromObject(input) {\n        // Check if the input already has an ID\n        // If so, keep it. It not, create a new UUID\n        this.id = input.id || Random.id();\n\n        // Assign the input name to the Protocol\n        this.name = input.name;\n\n        // Retrieve locked status, use !! to make it truthy\n        // so that undefined values will be set to false\n        this.locked = !!input.locked;\n\n        // TODO: Check how to regenerate Set from Object\n        //this.availableTo = new Set(input.availableTo);\n        //this.editableBy = new Set(input.editableBy);\n\n        // If the input contains Protocol matching rules\n        if (input.protocolMatchingRules) {\n            input.protocolMatchingRules.forEach(ruleObject => {\n                // Create new Rules from the stored data\n                var rule = new HP.ProtocolMatchingRule();\n                rule.fromObject(ruleObject);\n\n                // Add them to the Protocol\n                this.protocolMatchingRules.push(rule);\n            });\n        }\n\n        // If the input contains data for various Stages in the\n        // display set sequence\n        if (input.stages) {\n            input.stages.forEach(stageObject => {\n                // Create Stages from the stored data\n                var stage = new HP.Stage();\n                stage.fromObject(stageObject);\n\n                // Add them to the Protocol\n                this.stages.push(stage);\n            });\n        }\n    }\n\n    /**\n     * Creates a clone of the current Protocol with a new name\n     *\n     * @param name\n     * @returns {Protocol|*}\n     */\n    createClone(name) {\n        // Create a new JavaScript independent of the current Protocol\n        var currentProtocol = Object.assign({}, this);\n\n        // Create a new Protocol to return\n        var clonedProtocol = new HP.Protocol();\n\n        // Apply the desired properties\n        currentProtocol.id = clonedProtocol.id;\n        clonedProtocol.fromObject(currentProtocol);\n\n        // If we have specified a name, assign it\n        if (name) {\n            clonedProtocol.name = name;\n        }\n\n        // Unlock the clone\n        clonedProtocol.locked = false;\n\n        // Return the cloned Protocol\n        return clonedProtocol;\n    }\n\n    /**\n     * Adds a Stage to this Protocol's display set sequence\n     *\n     * @param stage\n     */\n    addStage(stage) {\n        this.stages.push(stage);\n\n        // Update the modifiedDate and User that last\n        // modified this Protocol\n        this.protocolWasModified();\n    }\n\n    /**\n     * Adds a Rule to this Protocol's array of matching rules\n     *\n     * @param rule\n     */\n    addProtocolMatchingRule(rule) {\n        this.protocolMatchingRules.push(rule);\n\n        // Update the modifiedDate and User that last\n        // modified this Protocol\n        this.protocolWasModified();\n    }\n\n    /**\n     * Removes a Rule from this Protocol's array of matching rules\n     *\n     * @param rule\n     */\n    removeProtocolMatchingRule(rule) {\n        var wasRemoved = removeFromArray(this.protocolMatchingRules, rule);\n\n        // Update the modifiedDate and User that last\n        // modified this Protocol\n        if (wasRemoved) {\n            this.protocolWasModified();\n        }\n    }\n};\n","import { Random } from 'meteor/random';\n\nimport { comparators } from '../lib/comparators';\n\nconst EQUALS_REGEXP = /^equals$/;\n\n/**\n * This Class represents a Rule to be evaluated given a set of attributes\n * Rules have:\n * - An attribute (e.g. 'seriesDescription')\n * - A constraint Object, in the form required by Validate.js:\n *\n * rule.constraint = {\n *   contains: {\n *      value: 'T-1'\n *      }\n *   };\n *\n *  Note: In this example we use the 'contains' Validator, which is a custom Validator defined in Viewerbase\n *\n * - A value for whether or not they are Required to be matched (default: False)\n * - A value for their relative weighting during Protocol or Image matching (default: 1)\n */\nexport class Rule {\n    /**\n     * The Constructor for the Class to create a Rule with the bare\n     * minimum information\n     *\n     * @param name The desired name for the Rule\n     */\n    constructor(attribute, constraint, required, weight) {\n        // Create a new UUID for this Rule\n        this.id = Random.id();\n\n        // Set the Rule's weight (defaults to 1)\n        this.weight = weight || 1;\n\n        // If an attribute is specified, assign it\n        if (attribute) {\n            this.attribute = attribute;\n        }\n\n        // If a constraint is specified, assign it\n        if (constraint) {\n            this.constraint = constraint;\n        }\n\n        // If a value for 'required' is specified, assign it\n        if (required === undefined) {\n            // If no value was specified, default to False\n            this.required = false;\n        } else {\n            this.required = required;\n        }\n\n        // Cache for constraint info object\n        this._constraintInfo = void 0;\n\n        // Cache for validator and value object\n        this._validatorAndValue = void 0;\n    }\n\n    /**\n     * Occasionally the Rule class needs to be instantiated from a JavaScript Object.\n     * This function fills in a Protocol with the Object data.\n     *\n     * @param input A Rule as a JavaScript Object, e.g. retrieved from MongoDB or JSON\n     */\n    fromObject(input) {\n        // Check if the input already has an ID\n        // If so, keep it. It not, create a new UUID\n        this.id = input.id || Random.id();\n\n        // Assign the specified input data to the Rule\n        this.required = input.required;\n        this.weight = input.weight;\n        this.attribute = input.attribute;\n        this.constraint = input.constraint;\n    }\n\n    /**\n     * Get the constraint info object for the current constraint\n     * @return {Object\\undefined} Constraint object or undefined if current constraint \n     *                            is not valid or not found in comparators list\n     */\n    getConstraintInfo() {\n        let constraintInfo = this._constraintInfo;\n        // Check if info is cached already\n        if (constraintInfo !== void 0) {\n            return constraintInfo;\n        }\n\n        const ruleConstraint = Object.keys(this.constraint)[0];\n\n        if (ruleConstraint !== void 0) {\n            constraintInfo = comparators.find(comparator => ruleConstraint === comparator.id)\n        }\n\n        // Cache this information for later use\n        this._constraintInfo = constraintInfo;\n\n        return constraintInfo;\n    }\n\n     /**\n     * Check if current rule is related to priors\n     * @return {Boolean} True if a rule is related to priors or false otherwise\n     */\n    isRuleForPrior() {\n        // @TODO: Should we check this too? this.attribute === 'relativeTime'\n        return this.attribute === 'abstractPriorValue';\n    }\n\n    /**\n     * If the current rule is a rule for priors, returns the number of referenced priors. Otherwise, returns -1.\n     * @return {Number} The number of referenced priors or -1 if not applicable. Returns zero if the actual value could not be determined.\n     */\n    getNumberOfPriorsReferenced() {\n        if (!this.isRuleForPrior()) {\n            return -1;\n        }\n\n        // Get rule's validator and value\n        const ruleValidatorAndValue = this.getConstraintValidatorAndValue();\n        const { value, validator } = ruleValidatorAndValue;\n        const intValue = parseInt(value, 10) || 0; // avoid possible NaN\n\n        // \"Equal to\" validators\n        if (EQUALS_REGEXP.test(validator)) {\n            // In this case, -1 (the oldest prior) indicates that at least one study is used\n            return intValue < 0 ? 1 : intValue;\n        }\n\n        // Default cases return value\n        return 0;\n    }\n\n    /**\n     * Get the constraint validator and value\n     * @return {Object|undefined} Returns an object containing the validator and it's value or undefined\n     */\n    getConstraintValidatorAndValue() {\n        let validatorAndValue = this._validatorAndValue;\n        \n        // Check if validator and value are cached already\n        if (validatorAndValue !== void 0) {\n            return validatorAndValue;\n        }\n\n        // Get the constraint info object\n        const constraintInfo = this.getConstraintInfo();\n\n        // Constraint info object exists and is valid\n        if (constraintInfo !== void 0) {\n            const validator = constraintInfo.validator;\n            const currentValidator = this.constraint[validator];\n\n            if (currentValidator) {\n                const constraintValidator = constraintInfo.validatorOption;\n                const constraintValue = currentValidator[constraintValidator];\n\n                validatorAndValue = {\n                    value: constraintValue,\n                    validator: constraintInfo.id\n                };\n\n                this._validatorAndValue = validatorAndValue;\n            }\n        }\n\n        return validatorAndValue;\n    }\n}\n","import { Random } from 'meteor/random';\n\n/**\n * A Stage is one step in the Display Set Sequence for a Hanging Protocol\n *\n * Stages are defined as a ViewportStructure and an array of Viewports\n *\n * @type {Stage}\n */\nHP.Stage = class Stage {\n    constructor(ViewportStructure, name) {\n        // Create a new UUID for this Stage\n        this.id = Random.id();\n\n        // Assign the name and ViewportStructure provided\n        this.name = name;\n        this.viewportStructure = ViewportStructure;\n\n        // Create an empty array for the Viewports\n        this.viewports = [];\n\n        // Set the created date to Now\n        this.createdDate = new Date();\n    }\n\n    /**\n     * Creates a clone of the current Stage with a new name\n     *\n     * Note! This method absolutely cannot be renamed 'clone', because\n     * Minimongo's insert method uses 'clone' internally and this\n     * somehow causes very bizarre behaviour\n     *\n     * @param name\n     * @returns {Stage|*}\n     */\n    createClone(name) {\n        // Create a new JavaScript independent of the current Protocol\n        var currentStage = Object.assign({}, this);\n\n        // Create a new Stage to return\n        var clonedStage = new HP.Stage();\n\n        // Assign the desired properties\n        currentStage.id = clonedStage.id;\n        clonedStage.fromObject(currentStage);\n\n        // If we have specified a name, assign it\n        if (name) {\n            clonedStage.name = name;\n        }\n\n        // Return the cloned Stage\n        return clonedStage;\n    }\n\n    /**\n     * Occasionally the Stage class needs to be instantiated from a JavaScript Object.\n     * This function fills in a Protocol with the Object data.\n     *\n     * @param input A Stage as a JavaScript Object, e.g. retrieved from MongoDB or JSON\n     */\n    fromObject(input) {\n        // Check if the input already has an ID\n        // If so, keep it. It not, create a new UUID\n        this.id = input.id || Random.id();\n\n        // Assign the input name to the Stage\n        this.name = input.name;\n\n        // If a ViewportStructure is present in the input, add it from the\n        // input data\n        this.viewportStructure = new HP.ViewportStructure();\n        this.viewportStructure.fromObject(input.viewportStructure);\n\n        // If any viewports are present in the input object\n        if (input.viewports) {\n            input.viewports.forEach(viewportObject => {\n                // Create a new Viewport with their data\n                var viewport = new HP.Viewport();\n                viewport.fromObject(viewportObject);\n\n                // Add it to the viewports array\n                this.viewports.push(viewport);\n            });\n        }\n    }\n};","// Local imports\nimport { removeFromArray } from '../lib/removeFromArray';\n\n/**\n * This Class defines a Viewport in the Hanging Protocol Stage. A Viewport contains\n * arrays of Rules that are matched in the ProtocolEngine in order to determine which\n * images should be hung.\n *\n * @type {Viewport}\n */\nHP.Viewport = class Viewport {\n    constructor() {\n        this.viewportSettings = {};\n        this.imageMatchingRules = [];\n        this.seriesMatchingRules = [];\n        this.studyMatchingRules = [];\n    }\n\n    /**\n     * Occasionally the Viewport class needs to be instantiated from a JavaScript Object.\n     * This function fills in a Viewport with the Object data.\n     *\n     * @param input The Viewport as a JavaScript Object, e.g. retrieved from MongoDB or JSON\n     */\n    fromObject(input) {\n        // If ImageMatchingRules exist, create them from the Object data\n        // and add them to the Viewport's imageMatchingRules array\n        if (input.imageMatchingRules) {\n            input.imageMatchingRules.forEach(ruleObject => {\n                var rule = new HP.ImageMatchingRule();\n                rule.fromObject(ruleObject);\n                this.imageMatchingRules.push(rule);\n            });\n        }\n\n        // If SeriesMatchingRules exist, create them from the Object data\n        // and add them to the Viewport's seriesMatchingRules array\n        if (input.seriesMatchingRules) {\n            input.seriesMatchingRules.forEach(ruleObject => {\n                var rule = new HP.SeriesMatchingRule();\n                rule.fromObject(ruleObject);\n                this.seriesMatchingRules.push(rule);\n            });\n        }\n\n        // If StudyMatchingRules exist, create them from the Object data\n        // and add them to the Viewport's studyMatchingRules array\n        if (input.studyMatchingRules) {\n            input.studyMatchingRules.forEach(ruleObject => {\n                var rule = new HP.StudyMatchingRule();\n                rule.fromObject(ruleObject);\n                this.studyMatchingRules.push(rule);\n            });\n        }\n\n        // If ViewportSettings exist, add them to the current protocol\n        if (input.viewportSettings) {\n            this.viewportSettings = input.viewportSettings;\n        }\n    }\n\n    /**\n     * Finds and removes a rule from whichever array it exists in.\n     * It is not required to specify if it exists in studyMatchingRules,\n     * seriesMatchingRules, or imageMatchingRules\n     *\n     * @param rule\n     */\n    removeRule(rule) {\n        var array;\n        if (rule instanceof HP.StudyMatchingRule) {\n            array = this.studyMatchingRules;\n        } else if (rule instanceof HP.SeriesMatchingRule) {\n            array = this.seriesMatchingRules;\n        } else if (rule instanceof HP.ImageMatchingRule) {\n            array = this.imageMatchingRules;\n        }\n\n        removeFromArray(array, rule);\n    }\n};","/**\n * The ViewportStructure class represents the layout and layout properties that\n * Viewports are displayed in. ViewportStructure has a type, which corresponds to\n * a layout template, and a set of properties, which depend on the type.\n *\n * @type {ViewportStructure}\n */\nHP.ViewportStructure = class ViewportStructure {\n    constructor(type, properties) {\n        this.type = type;\n        this.properties = properties;\n    }\n\n    /**\n     * Occasionally the ViewportStructure class needs to be instantiated from a JavaScript Object.\n     * This function fills in a ViewportStructure with the Object data.\n     *\n     * @param input The ViewportStructure as a JavaScript Object, e.g. retrieved from MongoDB or JSON\n     */\n    fromObject(input) {\n        this.type = input.type;\n        this.properties = input.properties;\n    }\n\n    /**\n     * Retrieve the layout template name based on the layout type\n     *\n     * @returns {string}\n     */\n    getLayoutTemplateName() {\n        // Viewport structure can be updated later when we build more complex display layouts\n        switch (this.type) {\n            case 'grid':\n                return 'gridLayout';\n        }\n    }\n\n    /**\n     * Retrieve the number of Viewports required for this layout\n     * given the layout type and properties\n     *\n     * @returns {string}\n     */\n    getNumViewports() {\n        // Viewport structure can be updated later when we build more complex display layouts\n        switch (this.type) {\n            case 'grid':\n                // For the typical grid layout, we only need to multiply rows by columns to\n                // obtain the number of viewports\n                return this.properties.rows * this.properties.columns;\n        }   \n    }\n};","import { Rule } from '../Rule';\n\n/**\n * The ImageMatchingRule class extends the Rule Class.\n *\n * At present it does not add any new methods or attributes\n * @type {ImageMatchingRule}\n */\nHP.ImageMatchingRule = class ImageMatchingRule extends Rule {};","import { Rule } from '../Rule';\n\n/**\n * The ProtocolMatchingRule Class extends the Rule Class.\n *\n * At present it does not add any new methods or attributes\n * @type {ProtocolMatchingRule}\n */\nHP.ProtocolMatchingRule = class ProtocolMatchingRule extends Rule {};","import { Rule } from '../Rule';\n\n/**\n * The SeriesMatchingRule Class extends the Rule Class.\n *\n * At present it does not add any new methods or attributes\n * @type {SeriesMatchingRule}\n */\nHP.SeriesMatchingRule = class SeriesMatchingRule extends Rule {};","import { Rule } from '../Rule';\n\n/**\n * The StudyMatchingRule Class extends the Rule Class.\n *\n * At present it does not add any new methods or attributes\n * @type {StudyMatchingRule}\n */\nHP.StudyMatchingRule = class StudyMatchingRule extends Rule {};\n","const comparators = [{\n    id: 'equals',\n    name: '= (Equals)',\n    validator: 'equals',\n    validatorOption: 'value',\n    description: 'The attribute must equal this value.'\n}, {\n    id: 'doesNotEqual',\n    name: '!= (Does not equal)',\n    validator: 'doesNotEqual',\n    validatorOption: 'value',\n    description: 'The attribute must not equal this value.'\n}, {\n    id: 'contains',\n    name: 'Contains',\n    validator: 'contains',\n    validatorOption: 'value',\n    description: 'The attribute must contain this value.'\n}, {\n    id: 'doesNotContain',\n    name: 'Does not contain',\n    validator: 'doesNotContain',\n    validatorOption: 'value',\n    description: 'The attribute must not contain this value.'\n}, {\n    id: 'startsWith',\n    name: 'Starts with',\n    validator: 'startsWith',\n    validatorOption: 'value',\n    description: 'The attribute must start with this value.'\n}, {\n    id: 'endsWith',\n    name: 'Ends with',\n    validator: 'endsWith',\n    validatorOption: 'value',\n    description: 'The attribute must end with this value.'\n}, {\n    id: 'onlyInteger',\n    name: 'Only Integers',\n    validator: 'numericality',\n    validatorOption: 'onlyInteger',\n    description: \"Real numbers won't be allowed.\"\n}, {\n    id: 'greaterThan',\n    name: '> (Greater than)',\n    validator: 'numericality',\n    validatorOption: 'greaterThan',\n    description: 'The attribute has to be greater than this value.'\n}, {\n    id: 'greaterThanOrEqualTo',\n    name: '>= (Greater than or equal to)',\n    validator: 'numericality',\n    validatorOption: 'greaterThanOrEqualTo',\n    description: 'The attribute has to be at least this value.'\n}, {\n    id: 'lessThanOrEqualTo',\n    name: '<= (Less than or equal to)',\n    validator: 'numericality',\n    validatorOption: 'lessThanOrEqualTo',\n    description: 'The attribute can be this value at the most.'\n}, {\n    id: 'lessThan',\n    name: '< (Less than)',\n    validator: 'numericality',\n    validatorOption: 'lessThan',\n    description: 'The attribute has to be less than this value.'\n}, {\n    id: 'odd',\n    name: 'Odd',\n    validator: 'numericality',\n    validatorOption: 'odd',\n    description: 'The attribute has to be odd.'\n}, {\n    id: 'even',\n    name: 'Even',\n    validator: 'numericality',\n    validatorOption: 'even',\n    description: 'The attribute has to be even.'\n}];\n\n// Immutable object\nObject.freeze(comparators);\n\nexport { comparators }","import { _ } from 'meteor/underscore';\n\n/**\n * Removes the first instance of an element from an array, if an equal value exists\n *\n * @param array\n * @param input\n *\n * @returns {boolean} Whether or not the element was found and removed\n */\nconst removeFromArray = (array, input) => {\n    // If the array is empty, stop here\n    if (!array ||\n        !array.length) {\n        return false;\n    }\n\n    array.forEach((value, index) => {\n        if (_.isEqual(value, input)) {\n            indexToRemove = index;\n            return false;\n        }\n    });\n\n    if (indexToRemove === void 0) {\n        return false;\n    }\n\n    array.splice(indexToRemove, 1);\n    return true;\n};\n\nexport { removeFromArray };","Meteor.publish('hangingprotocols', function() {\n    // TODO: filter by availableTo user\n    return HangingProtocols.find();\n});\n"]}